!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[].concat,r=Object.assign,o=Object.prototype.toString,a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Missing parameter";throw new Error(t)},u=function(t){return"[object Date]"===o.call(t)},s=function(t){return"[object Object]"===o.call(t)},l=function(t){return"[object Function]"===o.call(t)},c=function(t){return"[object String]"===o.call(t)},d=Array.isArray;e.concat=n,e.assign=r,e.toString=o,e.throwIfMissing=a,e.isObject=s,e.isDate=u,e.isFunction=l,e.isString=c,e.isArray=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=function(t){return t&&t.__esModule?t:{default:t}}(n);"undefined"!=typeof window&&(window.formBuilder=r.default,window.Vue&&(window.iview||window.iView)&&window.Vue.use(r.default)),e.default=r.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=function(t){return t&&t.__esModule?t:{default:t}}(n),o=i(0),a=function t(e){!this instanceof t&&(0,o.throwIfMissing)("formBuilder is a constructor and should be called with the `new` keyword"),this.init(e)};a.default={options:{formProps:{labelWidth:125,labelPosition:"right",showMessage:!0,autocomplete:"off",inline:!1},form:{ref:"formBuilder",method:"POST",action:"",onSubmit:function(t){}},upload:{beforeUpload:function(){},onProgress:function(t,e,i){},onSuccess:function(t,e,i){},onError:function(t,e,i){},onPreview:function(t){},onRemove:function(t,e){},onFormatError:function(t,e){},onExceededSize:function(t,e){},onView:function(t){},handleView:!0,handleRemove:!0}}};a.formBuilderSetStyle=function(){if(null===document.getElementById("form-builder-style")){var t=document.createElement("style");t.id="form-builder-style",t.innerText=".form-builder-upload .form-builder-upload-list{display: inline-block;width: 60px;height: 60px;text-align: center;line-height: 60px;border: 1px solid transparent;border-radius: 4px;overflow: hidden;background: #fff;position: relative;box-shadow: 0 1px 1px rgba(0,0,0,.2);margin-right: 4px;}.form-builder-upload .form-builder-upload-list img{width:100%;height:100%;display:block;}.form-builder-upload .ivu-upload{display: inline-block;}.form-builder-upload .ivu-upload .form-builder-upload-btn{ width: 58px;height: 58px;line-height: 58px;}.form-builder-upload .ivu-upload .form-builder-upload-btn i{font-size: 20px;}.form-builder-upload  .form-upload-list-cover{ display: none; position: absolute; top: 0; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,.6); }.form-builder-upload  .form-upload-list-cover i{ color: #fff; font-size: 20px; cursor: pointer; margin: 0 2px; }.form-builder-upload .form-builder-upload-list:hover .form-upload-list-cover{ display: block; }",document.getElementsByTagName("head")[0].appendChild(t)}},a.install=function(t){var e=this;t.prototype.$formBuilder=function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a.formBuilderSetStyle();var r=new e(i),o=t.extend(r.component()),u=(new o).$mount();return(void 0===n?document.body:document.querySelector(n)).appendChild(u.$el),u._api()}};var u=["datepicker","timepicker"],s=["checkbox","radio"];a.prototype={init:function(t){var e=this;this._data={original:Array.isArray(t)?t:[],rules:{},formData:{},validate:{},vm:null},this.options=(0,o.assign)({},a.default.options),this._data.original.filter(function(t){return void 0!==t.field}).map(function(t){void 0===t.props&&(t.props={}),t.type=void 0===t.type?"text":t.type.toLowerCase();var i=void 0;"hidden"!==t.type?(e._data.rules[t.field]={field:t.field,type:t.type,title:t.title,options:t.options||[],props:t.props||{}},e._data.validate[t.field]=void 0===t.validate?[]:(0,o.isArray)(t.validate)?t.validate:[t.validate],"switch"===t.type?e._data.rules[t.field].slot=void 0===t.slot?{}:t.slot:i=-1!==u.indexOf(t.type)?r.default.tidyDateInput(t,t.value):-1!==s.indexOf(t.type)?r.default.tidyCheckedInput(t,t.value):"inputnumber"===t.type?parseFloat(t.value):"upload"===t.type?(0,o.isArray)(t.value)?t.value:[t.value]:t.value.toString()):i=t.value,e._data.formData[t.field]=i})},field:function(){return Object.keys(this._data.formData)},rules:function(){return this._data.rules},formData:function(){return this._data.formData},validate:function(){return this._data.validate},_bindWatch:function(){var t=this;this.field().map(function(e){t.vm.$watch("formData."+e,function(t,e){})})},component:function(){var t=this.formData(),e=this;return{name:"form-builder",data:function(){return{formData:t}},render:function(t){return e.render().parse()},beforeCreate:function(){e.vm=this},methods:{parseData:function(){return r.default.parseData(this.formData,e.rules())},_api:function(){return{formData:this.parseData,change:function(t,i){var n=e._data.rules[t];void 0!==n&&(i=-1!==u.indexOf(n.type)?r.default.tidyDateInput(n,i):-1!==s.indexOf(n.type)?r.default.tidyCheckedInput(n,i):"inputnumber"===n.type?parseFloat(i):"upload"===n.type?(0,o.isArray)(i)?i:[i]:i.toString()),e.vm.$set(e.vm.formData,t,i)},validate:function(t,i){e.vm.$refs.formBuilder.validate(function(e){!0===e?t():i()})},validateField:function(t,i){e.vm.$refs.formBuilder.validateField(t,i)},resetField:function(){e.vm.$refs.formBuilder.resetFields()}}}},mounted:function(){}}},render:function(){return new r.default({vm:this.vm,rules:this.rules(),formData:this.formData(),validate:this.validate()},this.options)}},e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.dateToTimeStamp=e.timeStampToDate=void 0;var r=i(4),o=n(r),a=i(5),u=n(a),s=i(0),l=function(t){var e=t.vm,i=t.rules,n=t.formData,r=t.validate,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.vm=e,this.rules=i,this.cvm=u.default.init(e.$createElement),this.form={model:n,rules:r},this.options=o},c=function(t){return(0,s.isDate)(t)?t:new Date(parseInt(t))},d=function(t){var e=Date.parse(t);return Number.isNaN(e)?"":e},p=["daterange","datetimerange","timerange"];l.parseData=function(t,e){var i={};return Object.keys(t).map(function(n){var r=t[n],o=e[n],a=void 0;void 0!==o?-1!==["datepicker","timepicker"].indexOf(o.type)?a=Array.isArray(r)?r.map(function(t){return""===t?"":d(t)}):""===r?"":d(r):-1!==["checkbox","radio"].indexOf(o.type)?Array.isArray(r)?(a=[],r.map(function(t){o.options.map(function(e,i){e.props.label===t&&a.push(e.props.value)})})):o.options.map(function(t,e){t.props.label===r&&(a=t.props.value)}):a=r:a=r,i[n]=a}),i},l.tidyDateInput=function(t,e){return-1!==p.indexOf(t.props.type)?(Array.isArray(e)||(t.value=["",""]),e.map(function(t){return""===t?"":c(t)})):""===e?"":c(e)},l.tidyCheckedInput=function(t,e){var i=void 0;return Array.isArray(t.value)?(i=[],e.map(function(e){t.options.map(function(t){t.props.value===e&&i.push(t.props.label)})})):t.options.map(function(t,n){t.props.value===e&&(i=t.props.label)}),i},l.prototype={parse:function(){var t=this;return this.makeForm(function(){return Object.keys(t.rules).map(function(e){var i=t.rules[e];return t.makeFormItem(i.field,i.title,function(){return[t[i.type].call(t,i)]})})})},makeForm:function(t){var e=this.options,i=o.default.init().props({model:this.form.model,rules:this.form.rules}).ref(e.form.ref).attrs({method:e.form.method,action:e.form.action}).nativeOn("submit",function(t){t.preventDefault(),e.form.onSubmit(t)});return this.cvm.form(i.get(),t)},makeFormItem:function(t,e,i){var n=this.options,r=o.default.init().props({prop:t,label:e,labelWidth:n.formProps.labelWidth,labelFor:t,showMessage:n.formProps.showMessage});return this.cvm.formItem(r.get(),i)},makeInput:function(t){var e=this.inputProps(t);return this.cvm.input(e.get())},makeInputNumber:function(t){var e=this.inputProps(t);return this.cvm.inputNumber(e.get())},makeRadio:function(t){var e=this,i=this.inputProps(t);return this.cvm.radioGroup(i.get(),function(){return t.options.map(function(t){return e.cvm.radio({props:t.props})})})},makeCheckBox:function(t){var e=this,i=this.inputProps(t);return this.cvm.checkboxGroup(i.get(),function(){return t.options.map(function(t){return e.cvm.checkbox({props:t.props})})})},makeSelect:function(t){var e=this,i=this.inputProps(t);return this.cvm.select(i.get(),t.options.map(function(t){return e.cvm.option({props:t.props})}))},makeSwitch:function(t){var e=this.inputProps(t).scopedSlots({open:function(){return t.slot.open},close:function(){return t.slot.close}});return this.cvm.switch(e.get())},makeDatePicker:function(t){t.props.type||(t.props.type="date");var e=this.inputProps(t);return this.cvm.datePicker(e.get())},makeTimePicker:function(t){t.props.type||(t.props.type="time");var e=this.inputProps(t);return this.cvm.timePicker(e.get())},makeColorPicker:function(t){var e=this.inputProps(t);return this.cvm.colorPicker(e.get())},makeUpload:function(t){var e=this,i=this.options,n=o.default.init().props(t.props).props({value:this.getInputValue(t.field),"before-upload":i.upload.beforeUpload,"on-progress":i.upload.onProgress,"on-success":function(n,r,o){i.upload.onSuccess(e.getInputValue(t.field).push,n,r,o)},"on-preview":i.upload.onPreview,"on-remove":i.upload.onRemove,"on-format-error":i.upload.onFormatError,"on-exceeded-size":i.upload.onExceededSize,"on-error":i.upload.onError}).get();return function(){var r=[],o=e.getInputValue(t.field);return e.cvm.make("div",{class:{"form-builder-upload":!0}},function(){return r.push(function(){return o.map(function(n){return e.cvm.make("div",{class:{"form-builder-upload-list":!0}},function(n){var r=[e.cvm.make("img",{attrs:{src:n}})];return!1===i.upload.handleRemove&&!1===i.upload.handleView||r.push(e.cvm.make("div",{class:{"form-upload-list-cover":!0}},function(n){var r=[];return!1!==i.upload.handleView&&r.push(e.cvm.icon({props:{type:"ios-eye-outline"},nativeOn:{click:function(){i.upload.onView(n),!0!==i.upload.handleView&&(0,s.isFunction)(i.upload.handleView)?i.upload.handleView(n):e.vm.$Modal.info({render:function(t){return t("img",{attrs:{src:n,style:"width: 100%;max-height: 300px;margin-top: 10px;"}})},title:"查看图片",closable:!0})}}})),!1!==i.upload.handleRemove&&r.push(e.cvm.icon({props:{type:"ios-trash-outline"},nativeOn:{click:function(){var r=e.getInputValue(t.field);r.splice(r.indexOf(n),1),i.upload.onRemove(n,r)}}})),r}(n))),r}(n))})}()),(!t.props["max-length"]||t.props["max-length"]>e.getInputValue(t.field).length)&&r.push(function(){return e.cvm.upload(n,function(){return[e.cvm.make("div",{class:{"form-builder-upload-btn":!0}},[e.cvm.icon({props:{type:"camera",size:20}})])]})}()),r})}()},inputProps:function(t){var e=this;return o.default.init().props(t.props).props("model","formData."+t.field).props("value",this.getInputValue(t.field)).on("input",function(i){return e.changeInputValue(t.field,i)})},changeInputValue:function(t,e){this.vm.$emit("input",e),this.vm.$set(this.vm.formData,t,e)},getInputValue:function(t){return this.vm.formData[t]},text:function(t){return this.makeInput(t)},radio:function(t){return this.makeRadio(t)},checkbox:function(t){return this.makeCheckBox(t)},select:function(t){return this.makeSelect(t)},switch:function(t){return this.makeSwitch(t)},inputnumber:function(t){return this.makeInputNumber(t)},datepicker:function(t){return this.makeDatePicker(t)},timepicker:function(t){return this.makeTimePicker(t)},colorpicker:function(t){return this.makeColorPicker(t)},upload:function(t){return this.makeUpload(t)}},e.default=l,e.timeStampToDate=c,e.dateToTimeStamp=d},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=function(){this._data=this._initData(),this._prev=null};o.init=function(){return new o},o.prototype={_initData:function(){return{class:{},style:{},attrs:{},props:{},domProps:{},on:{},nativeOn:{},directives:[],scopedSlots:{},slot:void 0,key:void 0,ref:void 0}},class:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:classList"),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,r.isArray)(e)?e.map(function(e){t._data.class[e.toString()]=!0}):(0,r.isObject)(e)?this._data.class=(0,r.assign)({},this._data.class,e):this._data.class[e.toString()]=void 0===i||i,this},style:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:style"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,r.isObject)(t)?this._data.style=(0,r.assign)({},this._data.style,t):void 0!==e&&(this._data.style[t.toString()]=e),this},attrs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:attrs"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,r.isObject)(t)?this._data.attrs=(0,r.assign)({},this._data.attrs,t):this._data.attrs[t.toString()]=e,this},props:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:props"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,r.isObject)(t)?this._data.props=(0,r.assign)({},this._data.props,t):this._data.props[t.toString()]=e,this},domProps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:domProps"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,r.isObject)(t)?this._data.domProps=(0,r.assign)({},this._data.domProps,t):this._data.domProps[t.toString()]=e,this},on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:onType"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,r.isObject)(t)?this._data.on=(0,r.assign)({},this._data.on,t):this._data.on[t.toString()]=e,this},nativeOn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:onType"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,r.isObject)(t)?this._data.nativeOn=(0,r.assign)({},this._data.nativeOn,t):this._data.nativeOn[t.toString()]=e,this},directives:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:directives");return this._data.directives=r.concat.call.apply(r.concat,n(this._data.directives).concat(n(t))),this},scopedSlots:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.throwIfMissing)("缺少参数:scopedSlot"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,r.isObject)(t)?this._data.scopedSlots=(0,r.assign)({},this._data.scopedSlots,t):this._data.scopedSlots[t.toString()]=e,this},slot:function(t){return this._data.slot=t,this},key:function(t){return this._data.key=t,this},ref:function(t){return this._data.ref=t,this},init:function(){this._data=this._initData()},get:function(){return this._prev=this._data,this.init(),this._prev},getPrev:function(){return this._prev}},e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.throwIfMissing)("缺少参数:createElement");this.$h=t};r.init=function(t){return new r(t)},r.prototype={form:function(t,e){return this.make("i-form",t,e)},formItem:function(t,e){return this.make("form-Item",t,e)},input:function(t,e){return this.make("i-input",t,e)},inputNumber:function(t,e){return this.make("Input-Number",t,e)},radioGroup:function(t,e){return this.make("Radio-Group",t,e)},radio:function(t,e){return this.make("Radio",t,e)},checkboxGroup:function(t,e){return this.make("Checkbox-Group",t,e)},checkbox:function(t,e){return this.make("Checkbox",t,e)},select:function(t,e){return this.make("i-select",t,e)},option:function(t,e){return this.make("i-option",t,e)},switch:function(t,e){return this.make("i-switch",t,e)},datePicker:function(t,e){return this.make("Date-Picker",t,e)},timePicker:function(t,e){return this.make("Time-Picker",t,e)},colorPicker:function(t,e){return this.make("Color-Picker",t,e)},upload:function(t,e){return this.make("Upload",t,e)},span:function(t,e){return this.make("span",t,e)},icon:function(t,e){return this.make("Icon",t,e)},button:function(t,e){return this.make("i-button",t,e)},modal:function(t,e){return this.make("Modal",t,e)},make:function(t,e,i){return(0,n.isString)(e)&&(e={domProps:{innerHTML:e}}),this.$h(t,e,this.getVNode(i))},getVNode:function(t){return(0,n.isFunction)(t)?t():t}},e.default=r}]);