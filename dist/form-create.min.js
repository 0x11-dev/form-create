/*! formCreate v1.0.0 | github https://github.com/xaboy/form-create.git */
!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[].concat,o=Object.assign,r=Object.prototype.toString,a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Missing parameter";throw new Error(t)},u=function(t){return"[object Date]"===r.call(t)},s=function(t){return"[object Object]"===r.call(t)},p=function(t){return"[object Function]"===r.call(t)},c=function(t){return"[object String]"===r.call(t)},l=Array.isArray;e.concat=i,e.assign=o,e.toString=r,e.throwIfMissing=a,e.isObject=s,e.isDate=u,e.isFunction=p,e.isString=c,e.isArray=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=function(t){return t&&t.__esModule?t:{default:t}}(i);"undefined"!=typeof window&&(window.formCreate=o.default,window.Vue&&(window.iview||window.iView)&&window.Vue.use(o.default)),e.default=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=function(t){return t&&t.__esModule?t:{default:t}}(i),r=n(0),a=function t(e){!this instanceof t&&(0,r.throwIfMissing)("formCreate is a constructor and should be called with the `new` keyword"),this.init(e)};a.default={options:{formProps:{labelWidth:125,labelPosition:"right",showMessage:!0,autocomplete:"off",inline:!1},form:{ref:"formCreate",method:"POST",action:"",onSubmit:function(t){}},upload:{beforeUpload:function(){},onProgress:function(t,e,n){},onSuccess:function(t,e,n){},onError:function(t,e,n){},onPreview:function(t){},onRemove:function(t,e){},onFormatError:function(t,e){},onExceededSize:function(t,e){},onView:function(t){},handleView:!0,handleRemove:!0}}};a.formCreateSetStyle=function(){if(null===document.getElementById("form-create-style")){var t=document.createElement("style");t.id="form-create-style",t.innerText=".form-create-upload .form-create-upload-list{display: inline-block;width: 60px;height: 60px;text-align: center;line-height: 60px;border: 1px solid transparent;border-radius: 4px;overflow: hidden;background: #fff;position: relative;box-shadow: 0 1px 1px rgba(0,0,0,.2);margin-right: 4px;}.form-create-upload .form-create-upload-list img{width:100%;height:100%;display:block;}.form-create-upload .ivu-upload{display: inline-block;}.form-create-upload .ivu-upload .form-create-upload-btn{ width: 58px;height: 58px;line-height: 58px;}.form-create-upload .ivu-upload .form-create-upload-btn i{font-size: 20px;}.form-create-upload  .form-upload-list-cover{ display: none; position: absolute; top: 0; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,.6); }.form-create-upload  .form-upload-list-cover i{ color: #fff; font-size: 20px; cursor: pointer; margin: 0 2px; }.form-create-upload .form-create-upload-list:hover .form-upload-list-cover{ display: block; }.form-create-upload .ivu-upload-list-file{ display: inline-block;float: left; }.form-create-upload .ivu-upload-list{ position: absolute;left: 0; }.form-create-upload .ivu-upload-select .form-create-upload-btn{ background: #fff;border: 1px dashed #dddee1;border-radius: 4px;text-align: center;cursor: pointer;position: relative;overflow: hidden;transition: border-color .2s ease; }",document.getElementsByTagName("head")[0].appendChild(t)}},a.install=function(t){var e=this;t.prototype.$formCreate=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;a.formCreateSetStyle();var o=new e(n),r=t.extend(o.component()),u=(new r).$mount();return(void 0===i?document.body:document.querySelector(i)).appendChild(u.$el),u._api()}};var u=["datepicker","timepicker"],s=["checkbox","radio"];a.prototype={init:function(t){var e=this;this._data={original:Array.isArray(t)?t:[],rules:{},formData:{},validate:{},vm:null},this.options=(0,r.assign)({},a.default.options),this._data.original.filter(function(t){return void 0!==t.field}).map(function(t){void 0===t.props&&(t.props={}),t.type=void 0===t.type?"input":t.type.toLowerCase();var n=void 0;"hidden"!==t.type?(e._data.rules[t.field]={field:t.field,type:t.type,title:t.title,options:t.options||[],props:t.props||{}},e._data.validate[t.field]=void 0===t.validate?[]:(0,r.isArray)(t.validate)?t.validate:[t.validate],"switch"===t.type?(e._data.rules[t.field].slot=void 0===t.slot?{}:t.slot,n=t.value):n="select"===t.type&&t.props&&!0===t.props.multiple?void 0===t.value||""===t.value?[]:(0,r.isArray)(t.value)?t.value:[t.value]:-1!==u.indexOf(t.type)?o.default.tidyDateInput(t,t.value):-1!==s.indexOf(t.type)?o.default.tidyCheckedInput(t,t.value):"inputnumber"===t.type?parseFloat(t.value):"upload"===t.type?(0,r.isArray)(t.value)?t.value:[t.value]:t.value):n=t.value,e._data.formData[t.field]=n})},field:function(){return Object.keys(this._data.formData)},rules:function(){return this._data.rules},formData:function(){return this._data.formData},validate:function(){return this._data.validate},_bindWatch:function(){var t=this;this.field().map(function(e){t.vm.$watch("formData."+e,function(t,e){})})},component:function(){var t=this.formData(),e=this;return{name:"form-create",data:function(){return{formData:t}},render:function(t){return e.render().parse()},beforeCreate:function(){e.vm=this},methods:{parseData:function(){return o.default.parseData(this.formData,e.rules())},_api:function(){var t=this;return{formData:function(){return t.parseData()},changeField:function(t,n){var i=e._data.rules[t];void 0!==i&&(-1!==u.indexOf(i.type)?n=o.default.tidyDateInput(i,n):-1!==s.indexOf(i.type)?n=o.default.tidyCheckedInput(i,n):"inputnumber"===i.type?n=parseFloat(n):"upload"===i.type&&(n=(0,r.isArray)(n)?n:[n])),e.vm.$set(e.vm.formData,t,n)},validate:function(t,n){e.vm.$refs.formCreate.validate(function(e){!0===e?t():n()})},validateField:function(t,n){e.vm.$refs.formCreate.validateField(t,n)},resetFields:function(){e.vm.$refs.formCreate.resetFields()},remove:function(){e.vm.$el.remove(),e.vm.$destroy()},fields:function(){return e.field()},submit:function(){e.vm.$refs.formCreate.$el.submit()}}}},mounted:function(){}}},render:function(){return new o.default({vm:this.vm,rules:this.rules(),formData:this.formData(),validate:this.validate()},this.options)}},e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.dateToTimeStamp=e.timeStampToDate=void 0;var o=n(4),r=i(o),a=n(5),u=i(a),s=n(0),p=function(t){var e=t.vm,n=t.rules,i=t.formData,o=t.validate,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.vm=e,this.rules=n,this.cvm=u.default.init(e.$createElement),this.form={model:i,rules:o},this.options=r},c=function(t){return(0,s.isDate)(t)?t:new Date(parseInt(t))},l=function(t){var e=Date.parse(t);return Number.isNaN(e)?"":e},d=["daterange","datetimerange","timerange"];p.parseData=function(t,e){var n={};return Object.keys(t).map(function(i){var o=t[i],r=e[i],a=void 0;void 0!==r?-1!==["datepicker","timepicker"].indexOf(r.type)?a=Array.isArray(o)?o.map(function(t){return""===t?"":l(t)}):""===o?"":l(o):-1!==["checkbox","radio"].indexOf(r.type)?Array.isArray(o)?(a=[],o.map(function(t){r.options.map(function(e,n){e.label===t&&a.push(e.value)})})):r.options.map(function(t,e){t.label===o&&(a=t.value)}):a=o:a=o,n[i]=a}),n},p.tidyDateInput=function(t,e){return-1!==d.indexOf(t.props.type)?(Array.isArray(e)||(e=["",""]),e.map(function(t){return""===t?"":c(t)})):""===e?"":c(e)},p.tidyCheckedInput=function(t,e){var n=void 0;return Array.isArray(t.value)?(n=[],e.map(function(e){t.options.map(function(t){t.value===e&&n.push(t.label)})})):t.options.map(function(t,i){t.value===e&&(n=t.label)}),n},p.prototype={parse:function(){var t=this;return this.makeForm(function(){return Object.keys(t.rules).map(function(e){var n=t.rules[e];return t.makeFormItem(n.field,n.title,function(){return[t[n.type].call(t,n)]})})})},makeForm:function(t){var e=this.options,n=r.default.init().props({model:this.form.model,rules:this.form.rules}).ref(e.form.ref).attrs({method:e.form.method,action:e.form.action}).nativeOn("submit",function(t){t.preventDefault(),e.form.onSubmit(t)});return this.cvm.form(n.get(),t)},makeFormItem:function(t,e,n){var i=this.options,o=r.default.init().props({prop:t,label:e,labelWidth:i.formProps.labelWidth,labelFor:t,showMessage:i.formProps.showMessage});return this.cvm.formItem(o.get(),n)},makeInput:function(t){var e=this.inputProps(t);return this.cvm.input(e.get())},makeInputNumber:function(t){var e=this.inputProps(t);return this.cvm.inputNumber(e.get())},makeRadio:function(t){var e=this,n=this.inputProps(t);return this.cvm.radioGroup(n.get(),function(){return t.options.map(function(t){return e.cvm.radio({props:t})})})},makeCheckBox:function(t){var e=this,n=this.inputProps(t);return this.cvm.checkboxGroup(n.get(),function(){return t.options.map(function(t){return e.cvm.checkbox({props:t})})})},makeSelect:function(t){var e=this,n=this.inputProps(t);return this.cvm.select(n.get(),t.options.map(function(t){return e.cvm.option({props:t})}))},makeSwitch:function(t){var e=this.inputProps(t).scopedSlots({open:function(){return t.slot.open},close:function(){return t.slot.close}});return this.cvm.switch(e.get())},makeDatePicker:function(t){t.props.type||(t.props.type="date");var e=this.inputProps(t);return this.cvm.datePicker(e.get())},makeTimePicker:function(t){t.props.type||(t.props.type="time");var e=this.inputProps(t);return this.cvm.timePicker(e.get())},makeColorPicker:function(t){var e=this.inputProps(t);return this.cvm.colorPicker(e.get())},makeUpload:function(t){var e=this,n=this.options,i=r.default.init().props(t.props).props({beforeUpload:function(){var e,i;void 0===t.props.beforeUpload?(e=n.upload).beforeUpload.apply(e,arguments):(i=t.props).beforeUpload.apply(i,arguments)},onProgress:function(){var e,i;void 0===t.props.onProgress?(e=n.upload).onProgress.apply(e,arguments):(i=t.props).onProgress.apply(i,arguments)},onSuccess:function(i,o,r){var a=function(n){e.getInputValue(t.field).push(n)};void 0===t.props.onSuccess?n.upload.onSuccess(a,i,o,r):t.props.onSuccess(a,i,o,r)},onPreview:function(){var e,i;void 0===t.props.onPreview?(e=n.upload).onPreview.apply(e,arguments):(i=t.props).onPreview.apply(i,arguments)},onRemove:function(){var e,i;void 0===t.props.onRemove?(e=n.upload).onRemove.apply(e,arguments):(i=t.props).onRemove.apply(i,arguments)},onFormatError:function(){var e,i;void 0===t.props.onFormatError?(e=n.upload).onFormatError.apply(e,arguments):(i=t.props).onFormatError.apply(i,arguments)},onExceededSize:function(){var e,i;void 0===t.props.onExceededSize?(e=n.upload).onExceededSize.apply(e,arguments):(i=t.props).onExceededSize.apply(i,arguments)},onError:function(){var e,i;void 0===t.props.onError?(e=n.upload).onError.apply(e,arguments):(i=t.props).onError.apply(i,arguments)}}).get();return function(){var o=[],r=e.getInputValue(t.field);return e.cvm.make("div",{class:{"form-create-upload":!0}},function(){return o.push(function(){return r.map(function(i){return e.cvm.make("div",{class:{"form-create-upload-list":!0}},function(i){var o=[e.cvm.make("img",{attrs:{src:i}})];return!1===n.upload.handleRemove&&!1===n.upload.handleView||o.push(e.cvm.make("div",{class:{"form-upload-list-cover":!0}},function(i){var o=[];return!1!==n.upload.handleView&&o.push(e.cvm.icon({props:{type:"ios-eye-outline"},nativeOn:{click:function(){n.upload.onView(i),!0!==n.upload.handleView&&(0,s.isFunction)(n.upload.handleView)?n.upload.handleView(i):e.vm.$Modal.info({render:function(t){return t("img",{attrs:{src:i,style:"width: 100%;max-height: 300px;margin-top: 10px;"}})},title:"查看图片",closable:!0})}}})),!1!==n.upload.handleRemove&&o.push(e.cvm.icon({props:{type:"ios-trash-outline"},nativeOn:{click:function(){var o=e.getInputValue(t.field);o.splice(o.indexOf(i),1),n.upload.onRemove(i,o)}}})),o}(i))),o}(i))})}()),(!t.props["max-length"]||t.props["max-length"]>e.getInputValue(t.field).length)&&o.push(function(){return e.cvm.upload(i,function(){return[e.cvm.make("div",{class:{"form-create-upload-btn":!0}},[e.cvm.icon({props:{type:"camera",size:20}})])]})}()),o})}()},inputProps:function(t){var e=this;return r.default.init().props(t.props).props("model","formData."+t.field).props("value",this.getInputValue(t.field)).on("input",function(n){return e.changeInputValue(t.field,n)})},changeInputValue:function(t,e){this.vm.$emit("input",e),this.vm.$set(this.vm.formData,t,e)},getInputValue:function(t){return this.vm.formData[t]},input:function(t){return this.makeInput(t)},radio:function(t){return this.makeRadio(t)},checkbox:function(t){return this.makeCheckBox(t)},select:function(t){return this.makeSelect(t)},switch:function(t){return this.makeSwitch(t)},inputnumber:function(t){return this.makeInputNumber(t)},datepicker:function(t){return this.makeDatePicker(t)},timepicker:function(t){return this.makeTimePicker(t)},colorpicker:function(t){return this.makeColorPicker(t)},upload:function(t){return this.makeUpload(t)}},e.default=p,e.timeStampToDate=c,e.dateToTimeStamp=l},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){this._data=this._initData(),this._prev=null};r.init=function(){return new r},r.prototype={_initData:function(){return{class:{},style:{},attrs:{},props:{},domProps:{},on:{},nativeOn:{},directives:[],scopedSlots:{},slot:void 0,key:void 0,ref:void 0}},class:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:classList"),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,o.isArray)(e)?e.map(function(e){t._data.class[e.toString()]=!0}):(0,o.isObject)(e)?this._data.class=(0,o.assign)({},this._data.class,e):this._data.class[e.toString()]=void 0===n||n,this},style:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:style"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,o.isObject)(t)?this._data.style=(0,o.assign)({},this._data.style,t):void 0!==e&&(this._data.style[t.toString()]=e),this},attrs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:attrs"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,o.isObject)(t)?this._data.attrs=(0,o.assign)({},this._data.attrs,t):this._data.attrs[t.toString()]=e,this},props:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:props"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,o.isObject)(t)?this._data.props=(0,o.assign)({},this._data.props,t):this._data.props[t.toString()]=e,this},domProps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:domProps"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,o.isObject)(t)?this._data.domProps=(0,o.assign)({},this._data.domProps,t):this._data.domProps[t.toString()]=e,this},on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:onType"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,o.isObject)(t)?this._data.on=(0,o.assign)({},this._data.on,t):this._data.on[t.toString()]=e,this},nativeOn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:onType"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,o.isObject)(t)?this._data.nativeOn=(0,o.assign)({},this._data.nativeOn,t):this._data.nativeOn[t.toString()]=e,this},directives:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:directives");return this._data.directives=o.concat.call.apply(o.concat,i(this._data.directives).concat(i(t))),this},scopedSlots:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.throwIfMissing)("缺少参数:scopedSlot"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,o.isObject)(t)?this._data.scopedSlots=(0,o.assign)({},this._data.scopedSlots,t):this._data.scopedSlots[t.toString()]=e,this},slot:function(t){return this._data.slot=t,this},key:function(t){return this._data.key=t,this},ref:function(t){return this._data.ref=t,this},init:function(){this._data=this._initData()},get:function(){return this._prev=this._data,this.init(),this._prev},getPrev:function(){return this._prev}},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.throwIfMissing)("缺少参数:createElement");this.$h=t};o.init=function(t){return new o(t)},o.prototype={form:function(t,e){return this.make("i-form",t,e)},formItem:function(t,e){return this.make("form-Item",t,e)},input:function(t,e){return this.make("i-input",t,e)},inputNumber:function(t,e){return this.make("Input-Number",t,e)},radioGroup:function(t,e){return this.make("Radio-Group",t,e)},radio:function(t,e){return this.make("Radio",t,e)},checkboxGroup:function(t,e){return this.make("Checkbox-Group",t,e)},checkbox:function(t,e){return this.make("Checkbox",t,e)},select:function(t,e){return this.make("i-select",t,e)},option:function(t,e){return this.make("i-option",t,e)},switch:function(t,e){return this.make("i-switch",t,e)},datePicker:function(t,e){return this.make("Date-Picker",t,e)},timePicker:function(t,e){return this.make("Time-Picker",t,e)},colorPicker:function(t,e){return this.make("Color-Picker",t,e)},upload:function(t,e){return this.make("Upload",t,e)},span:function(t,e){return this.make("span",t,e)},icon:function(t,e){return this.make("Icon",t,e)},button:function(t,e){return this.make("i-button",t,e)},modal:function(t,e){return this.make("Modal",t,e)},make:function(t,e,n){return(0,i.isString)(e)&&(e={domProps:{innerHTML:e}}),this.$h(t,e,this.getVNode(n))},getVNode:function(t){return(0,i.isFunction)(t)?t():t}},e.default=o}]);