/*! form-create v1.4 | github https://github.com/xaboy/form-create | author xaboy */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("formCreate",[],t):"object"==typeof exports?exports.formCreate=t():e.formCreate=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){"use strict";function r(e){return O.call(e).slice(8,-1)}function o(e){return void 0===e||null===e}function i(e){return null==e?"":"object"===(void 0===e?"undefined":k(e))?JSON.stringify(e,null,2):String(e)}function a(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){var n=null;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout(function(){return e.apply(void 0,o)},t)}}function s(e){return"[object Date]"===O.call(e)}function l(e){return"[object Object]"===O.call(e)}function c(e){return"[object Function]"===O.call(e)}function f(e){return"[object String]"===O.call(e)}function p(e){return"[object Boolean]"===O.call(e)}function h(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function d(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function v(e){return Array.isArray(e)?e:[e]}function y(e){return Array.isArray(e)?e[0]||"":e}function m(e){return"object"===(void 0===e?"undefined":k(e))&&null!==e&&1===e.nodeType&&!l(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r];if((n=Array.isArray(o))||l(o)){var i=void 0===e[r];n?(n=!1,i&&(e[r]=[])):i&&(e[r]={}),b(e[r],o)}else e[r]=o}return e}function g(){return++w}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e}Object.defineProperty(t,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.toRawType=r,t.isUndef=o,t.toString=i,t.extend=a,t.debounce=u,t.isDate=s,t.isPlainObject=l,t.isFunction=c,t.isString=f,t.isBool=p,t.toLine=h,t.isNumeric=d,t.toArray=v,t.ATS=y,t.isElement=m,t.deepExtend=b,t.uniqueId=g,t.dateFormat=_;var O=t._toString=Object.prototype.toString,w=0},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=e.validate,r=void 0===n?[]:n,o=e.event,c=void 0===o?{}:o,p=e.col,h=void 0===p?{}:p,d=e.emit,v=void 0===d?[]:d,y=e.props,m=void 0===y?{}:y,b=e.options,g=void 0===b?[]:b,_=e.title,k=void 0===_?"":_,O=e.value,w=void 0===O?"":O,P=e.field,j=void 0===P?"":P;return e.col=l(h),e.props=s(m),e.emitEvent=a(j,v,t),e.event=(0,f.extend)(u(c),e.emitEvent),e.validate=i(r),e.options=i(g),e.title=k,e.value=w,e.field=j,Object.keys(e.emitEvent).length>0&&(0,f.extend)(e.on,e.emitEvent),e}function i(e){return Array.isArray(e)?e:[]}function a(e,t,n){var r={};return Array.isArray(t)?(t.forEach(function(t){r["on-"+t]=r[""+t]=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n.$emit.apply(n,[(0,f.toLine)(e+"-"+t).replace("_","-")].concat(o))}}),r):r}function u(e){return Object.keys(e).forEach(function(t){var n=0===(0,f.toString)(t).indexOf("on-")?t:"on-"+t;n!==t&&(e[n]=e[t])}),e}function s(e){return(0,f.isUndef)(e.hidden)&&(e.hidden=!1),(0,f.isUndef)(e.visibility)&&(e.visibility=!1),e}function l(e){return(0,f.isNumeric)(e)?{span:e}:(void 0===e.span&&(e.span=24),e)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.parseRule=o,t.parseArray=i,t.parseEmit=a,t.parseEvent=u,t.parseProps=s,t.parseCol=l;var f=n(0),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=o(n,t);this.rule=i,this.type=i.type,this.field=i.field,this.vm=t;var a=(0,f.uniqueId)();this.id=a,this.unique="fc_"+a,this.refName="__"+this.field+a,this.key="key_"+a,this.el={},this.init(),this.childrenHandlers=[],this.parseValue=this.toParseValue(this.rule.value)}return c(e,[{key:"init",value:function(){}},{key:"toParseValue",value:function(e){return e}},{key:"toTrueValue",value:function(e){return e}},{key:"setTrueValue",value:function(e){this.vm.changeTrueData(this.field,e)}},{key:"getValue",value:function(){return this.vm.getTrueDataValue(this.field)}},{key:"setParseValue",value:function(e){this.setTrueValue(this.toTrueValue(e))}},{key:"watchTrueValue",value:function(e){this.vm.changeFormData(this.field,this.toParseValue(e))}},{key:"watchParseValue",value:function(e){}},{key:"mounted",value:function(){this.el=this.vm.$refs[this.refName],this.defaultValue=this.toTrueValue(this.vm.$refs["fItem"+this.refName]?this.vm.$refs["fItem"+this.refName].initialValue:(0,f.deepExtend)({},{value:this.rule.value}).value)}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=n(7),l=r(s),c=n(5),f=r(c),p=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.vm=t,this.handler=n,this.options=r,this.vNode=new l.default(t),this.vData=new f.default,this.cache=null,this.$tickEvent=[],this.init()}return a(e,[{key:"init",value:function(){}},{key:"cacheParse",value:function(){this.cache&&"__tmp"!==this.handler.rule.type||(this.cache=this.parse());var e=[].concat(o(this.$tickEvent));return this.$tickEvent=[],this.vm.$nextTick(function(){e.forEach(function(e){return e()})}),this.cache}},{key:"sync",value:function(e){(0,u.isFunction)(e)&&this.$tickEvent.push(e),this.clearCache(),this.vm.sync()}},{key:"clearCache",value:function(){this.cache=null,this.handler.childrenHandlers.length>0&&this.handler.childrenHandlers.forEach(function(e){return e.render.clearCache()})}},{key:"parse",value:function(){var e=this.handler,t=e.type,n=e.rule,r=e.childrenHandlers,o=e.refName,i=e.key;if("__tmp"===n.type){var a=this.vm.constructor.super.compile(n.template,{}).render.call(n._vm||this.vm);return(0,u.extend)(a.data,n),console.log(a),a.key=i,[a]}n.ref=o;var s=this.vNode.make(t,(0,u.extend)({},n),function(){var e=[];return r.length>0&&(e=r.map(function(e){return e.render.cacheParse()})),e});return s.key=i,[s]}},{key:"inputProps",value:function(){var e=this,t=this.handler,n=t.refName,r=t.unique,o=t.key,i=t.field,a=t.rule,s=a.props,l=a.event;return this.vData.props((0,u.extend)(s,{value:this.vm.cptData[i],elementId:r})).ref(n).key(o+""+(0,u.uniqueId)()).on(l).on("input",function(t){e.onInput(t)})}},{key:"onInput",value:function(e){this.vm.$set(this.vm.cptData,this.handler.field,e)}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return{event:{},validate:[],options:[],col:{},children:[],emit:[],template:null}}function u(e){return function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new h(e,t,n,r,o)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return function(r,o,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=new h(e,r,o,i,a);return(0,c.isFunction)(t)?t(u):u.props(n,t),u}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.baseRule=a,t.creatorFactory=u,t.creatorTypeFactory=s;var c=n(0),f=n(5),p=function(e){return e&&e.__esModule?e:{default:e}}(f),h=function(e){function t(e,n,i,u){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.rule=(0,c.extend)(a(),{type:e,title:n,field:i,value:u}),l.props({hidden:!1,visibility:!1}),(0,c.isPlainObject)(s)&&l.props(s),l}return i(t,e),l(t,[{key:"type",value:function(e){return this.props("type",e),this}},{key:"get",value:function(){return this._data}},{key:"getRule",value:function(){return(0,c.extend)(this.rule,this.get())}},{key:"setValue",value:function(e){return this.rule.value=e,this}}]),t}(p.default);t.default=h,["event","col"].forEach(function(e){h.prototype[e]=function(t){return this.rule[e]=(0,c.extend)(this.rule[e],t),this}}),["validate","options","children","emit"].forEach(function(e){h.prototype[e]=function(t){return Array.isArray(t)||(t=[t]),this.rule[e]=this.rule[e].concat(t),this}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t.type.toLowerCase(),o=void 0===v.default[r]?i():v.default[r],a=new o.handler(e,t);return a.render=new o.render(e,a,n),a.noValue=o.noValue,a}function i(){return{handler:f.default,render:h.default,noValue:!0}}function a(){return{el:null,form:{inline:!1,labelPosition:"right",labelWidth:125,showMessage:!0,autocomplete:"off"},row:{gutter:0,type:void 0,align:void 0,justify:void 0,className:void 0},upload:{beforeUpload:function(){},onProgress:function(e,t,n){},onSuccess:function(e,t,n){},onError:function(e,t,n){},onPreview:function(e){},onRemove:function(e,t){},onFormatError:function(e,t){},onExceededSize:function(e,t){},handleIcon:"ios-eye-outline",allowRemove:!0},onSubmit:function(e){},submitBtn:{type:"primary",size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:y.submitBtnIcon,innerText:"提交",loading:!1,show:!0},resetBtn:{type:y.resetBtnType,size:"large",shape:void 0,long:!0,htmlType:"button",disabled:!1,icon:y.resetBtnIcon,innerText:"重置",loading:!1,show:!1},mounted:function(){}}}function u(e){var t=this,n=e.vm;return{formData:function(){return Object.keys(n.trueData).reduce(function(e,t){return e[t]=n.trueData[t].value,e},{})},getValue:function(t){t=(0,l.toString)(t);var n=e.handlers[t];if(void 0!==n)return n.getValue();console.error(t+" 字段不存在!")},changeField:function(r,o){r=(0,l.toString)(r);var i=e.handlers[r];void 0===i?console.error(r+" 字段不存在!"):(0,l.isFunction)(o)?o(n.getTrueData(r),function(e){t.changeField(r,e)}):(i.setTrueValue(o),i.render.sync())},removeField:function(t){e.removeField((0,l.toString)(t)),n.sync()},validate:function(t,n){e.getFormRef().validate(function(e){!0===e?t&&t():n&&n()})},validateField:function(t,n){e.getFormRef().validateField((0,l.toString)(t),n)},resetFields:function(){var t=e.handlers;Object.keys(n.trueData).forEach(function(e){n.$set(n.trueData[e],"value",t[e].defaultValue)})},destroy:function(){n.$el.parentNode.removeChild(n.$el),n.$destroy()},fields:function(){return e.fields()},append:function(t,n){e.append(t,n,!1)},prepend:function(t,n){e.append(t,n,!0)},submit:function(t,n){var r=this;this.validate(function(){var n=r.formData();(0,l.isFunction)(t)?t(n):e.options.onSubmit&&e.options.onSubmit(n)},function(){return n&&n()})},hidden:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.vm;t?Array.isArray(t)||(t=[t]):t=this.fields(),t.forEach(function(e){r.$set(r.trueData[e].rule.props,"hidden",!!n)})},visibility:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.vm;t?Array.isArray(t)||(t=[t]):t=this.fields(),t.forEach(function(e){r.$set(r.trueData[e].rule.props,"visibility",!!n)})},model:function(t){var n={};return t?Array.isArray(t)||(t=[t]):t=this.fields(),t.forEach(function(t){var r=e.handlers[t];if(!r)throw new Error(t+"字段不存在");n[t]=r.vm.getTrueData(t)}),n},bind:function(t){var n={},r=e.vm;return t?Array.isArray(t)||(t=[t]):t=this.fields(),t.forEach(function(e){n[e]=r.trueData[e].value,Object.defineProperty(n,e,{get:function(){return r.trueData[e].value},set:function(t){r.$set(r.trueData[e],"value",t)},enumerable:!0,configurable:!0})}),n},submitStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.changeButtonProps(e)},resetStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.changeResetProps(e)},btn:{loading:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.changeButtonProps({loading:e})},finish:function(){this.loading(!1)},disabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.changeButtonProps({disabled:e})}},resetBtn:{loading:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.changeResetProps({loading:e})},finish:function(){this.loading(!1)},disabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.changeResetProps({disabled:e})}},closeModal:function(){n.$Modal.remove()},set:function(e,t,r){n.$set(e,t,r)},reload:function(t){return e.reload(t)},options:function(t){(0,l.deepExtend)(e.options,t),n.sync()},onSuccess:function(e){this.setOption({onSubmit:e})},sync:function(t,n){if(!e.handlers[t])throw new Error(t+"字段不存在");e.handlers[t].render.sync(n)},refresh:function(){n.refresh()},vm:e}}function s(e){if((0,l.isDate)(e))return e;var t=new Date(e);return"Invalid Date"===t.toString()?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.componentCommon=t.getGlobalApi=t.formCreateStyle=t.iviewConfig=void 0,t.getComponent=o,t.getUdfComponent=i,t.getConfig=a,t.timeStampToDate=s;var l=n(0),c=n(1),f=r(c),p=n(2),h=r(p),d=n(8),v=r(d),y=t.iviewConfig=function(){var e={_v:2,resetBtnType:"ghost",resetBtnIcon:"refresh",submitBtnIcon:"ios-upload",fileIcon:"document-text",fileUpIcon:"folder",imgUpIcon:"camera"},t={_v:3,resetBtnType:"default",resetBtnIcon:"md-refresh",submitBtnIcon:"ios-share",fileIcon:"md-document",fileUpIcon:"ios-folder-open",imgUpIcon:"md-images"};return"undefined"==typeof iview?e:iview.version&&3==iview.version.split(".")[0]?t:e}();t.formCreateStyle=".form-create{padding:25px;} .fc-upload-btn,.fc-files{display: inline-block;width: 58px;height: 58px;text-align: center;line-height: 58px;border: 1px solid transparent;border-radius: 4px;overflow: hidden;background: #fff;position: relative;box-shadow: 0 1px 1px rgba(0,0,0,.2);margin-right: 4px;box-sizing: border-box;}.__fc_h{display:none;}.__fc_v{visibility:hidden;} .fc-files>.ivu-icon{vertical-align: middle;}.fc-files img{width:100%;height:100%;display:inline-block;vertical-align: top;}.fc-upload .ivu-upload{display: inline-block;}.fc-upload-btn{border: 1px dashed #dddee1;}.fc-upload .fc-upload-cover{ display: none; position: absolute; top: 0; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,.6); }.fc-upload .fc-upload-cover i{ color: #fff; font-size: 20px; cursor: pointer; margin: 0 2px; }.fc-files:hover .fc-upload-cover{ display: block; }.fc-upload .ivu-upload-list-file{ display: inline-block;float: left; }.fc-upload .ivu-upload-list{ position: absolute;left: 0; }.fc-spin-icon-load{animation: ani-fc-spin 1s linear infinite;} @-webkit-keyframes ani-fc-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes ani-fc-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}";t.getGlobalApi=u;t.componentCommon={data:function(){return{rules:{},cptData:{},buttonProps:{},resetProps:{},trueData:{},jsonData:{},$f:{},isShow:!0,watchs:[],unique:1,other:{}}},methods:{changeFormData:function(e,t){this.$set(this.cptData,e,t)},changeTrueData:function(e,t){this.$set(this.trueData[e],"value",t)},getTrueDataValue:function(e){return this.trueData[e].value},getTrueData:function(e){return this.trueData[e]},getFormData:function(e){return this.cptData[e]},removeFormData:function(e){delete this.cptData[e],delete this.trueData[e],delete this.jsonData[e]},changeButtonProps:function(e){this.$set(this,"buttonProps",(0,l.deepExtend)(this.buttonProps,e))},changeResetProps:function(e){this.$set(this,"resetProps",(0,l.deepExtend)(this.resetProps,e))},setField:function(e){this.$set(this.cptData,e,""),this.$set(this.trueData,e,{})},init:function(){var e=this,t=this.fComponent._type;this[t].forEach(function(n,r){var o=e.$watch(t+"."+r+".value",function(t){if(void 0===e.trueData[n.field])return o();e.$set(e.trueData[n.field],"value",t)});e.watchs.push(o)})},unWatch:function(){this.watchs.forEach(function(e){return e()}),this.watchs=[]},refresh:function(){console.trace("refresh"),this.unique+=1},sync:function(){var e=this;this.$nextTick(function(){e.fComponent.fRender.cacheUnique=e.unique+1,e.unique+=1})}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return{class:{},style:{},attrs:{},props:{},domProps:{},on:{},nativeOn:{},directives:[],scopedSlots:{},slot:void 0,key:void 0,ref:void 0}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.defVData=o;var a=n(0),u=function(){function e(){r(this,e),this._data=o()}return i(e,[{key:"class",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,a.isUndef)(e)?this:(Array.isArray(e)?e.map(function(e){t._data.class[(0,a.toString)(e)]=!0}):(0,a.isPlainObject)(e)?this._data.class=(0,a.extend)(this._data.class,e):this._data.class[(0,a.toString)(e)]=void 0===n||n,this)}},{key:"directives",value:function(e){return(0,a.isUndef)(e)?this:(this._data.directives=this._data.directives.call((0,a.toArray)(e)),this)}},{key:"init",value:function(){return this.constructor(),this}},{key:"get",value:function(){return this._prev=this._data,this.init(),this._prev}}]),e}();t.default=u;var s=["ref","key","slot"],l=["scopedSlots","nativeOn","on","domProps","props","attrs","style"];s.forEach(function(e){u.prototype[e]=function(t){return this._data[e]=t,this}}),l.forEach(function(e){u.prototype[e]=function(t,n){return(0,a.isUndef)(t)?this:((0,a.isPlainObject)(t)?this._data[e]=(0,a.extend)(this._data[e],t):this._data[e][(0,a.toString)(t)]=n,this)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){(0,l.isBool)(e.sumbitBtn)&&(e.sumbitBtn={show:e.sumbitBtn}),(0,l.isBool)(e.resetBtn)&&(e.resetBtn={show:e.resetBtn});var t=(0,l.deepExtend)((0,c.getConfig)(),e);return t.el=t.el?(0,l.isElement)(t.el)?t.el:document.querySelector(t.el):window.document.body,t}function a(e){var t={};return e.filter(function(e){return void 0!==e.type}).forEach(function(e){(0,l.isFunction)(e.getRule)&&(e=e.getRule()),e.field||(e.field=""),t[(0,l.toString)(e.field)]=e}),t}function u(){if(null===document.getElementById(b)){var e=document.createElement("style");e.id=b,e.innerText=c.formCreateStyle,document.getElementsByTagName("head")[0].appendChild(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.margeGlobal=i,t.parseRules=a,t.initStyle=u;var l=n(0),c=n(4),f=n(27),p=r(f),h=n(28),d=r(h),v=n(10),y=n(29),m=r(y),b="form-create-style",g=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),console.log("constructor"),console.log(r),this.options=i(r),console.log(this.options),this.rules=Array.isArray(t)?t:[],this.rules.forEach(function(e,t){(0,l.isFunction)(e.getRule)&&(n.rules[t]=e.getRule())}),this.handlers={},this.fRender={},this.formData={},this.validate={},this.trueData={},this.fieldList=[],u()}return s(e,[{key:"init",value:function(e){this.vm=e,this.createHandler(),this.fCreateApi=(0,c.getGlobalApi)(this),e.$set(e,"cptData",this.formData),e.$set(e,"trueData",this.trueData),e.$set(e,"buttonProps",this.options.submitBtn),e.$set(e,"resetProps",this.options.resetBtn),e.$set(e,"rules",this.rules),this.fRender=new p.default(this),this.$tick=(0,l.debounce)(function(t){return e.$nextTick(t)},300)}},{key:"setHandler",value:function(e){var t=e.rule,n=e.field;this.handlers[n]=e,!0!==e.noValue&&(this.formData[n]=e.parseValue,this.validate[n]=t.validate,this.trueData[n]={value:e.rule.value,rule:e.rule})}},{key:"notField",value:function(e){return-1===this.fieldList.indexOf(e)}},{key:"createHandler",value:function(){var e=this;this.rules.forEach(function(t){if(e.notField(t.field)){var n=(0,c.getComponent)(e.vm,t,e.options);e.createChildren(n),e.setHandler(n),e.fieldList.push(n.field)}else console.error(t.field+" 字段已存在")})}},{key:"createChildren",value:function(e){var t=this;Array.isArray(e.rule.children)&&e.rule.children.length>0&&e.rule.children.map(function(n){if((0,l.isFunction)(n.getRule)&&(n=n.getRule()),n.field=void 0===n.field?"":(0,l.toString)(n.field),t.notField(n.field)){var r=(0,c.getComponent)(t.vm,n,t.options);t.createChildren(r),e.childrenHandlers.push(r)}else console.error(n.field+" 字段已存在")})}},{key:"create",value:function(e){var t=e.extend(this.component()),n=(new t).$mount();return this.options.el.appendChild(n.$el),n}},{key:"mounted",value:function(e){var t=this;this.vm=e,e.$nextTick(function(){Object.keys(t.handlers).map(function(n){var r=t.handlers[n];console.log(void 0!==e.cptData[n],n),void 0!==e.cptData[n]&&t.addHandlerWatch(r),r.mounted()}),console.log(t.options),t.options.mounted&&t.options.mounted(t.fCreateApi)})}},{key:"component",value:function(){return(0,d.default)(this)}},{key:"append",value:function(e,t,n){if((0,l.isFunction)(e.getRule)&&(e=e.getRule()),-1!==Object.keys(this.handlers).indexOf((0,l.toString)(e.field)))throw new Error(e.field+"字段已存在");var r=(0,c.getComponent)(this.vm,e,this.options);this.createChildren(r),this.vm.setField(r.field),this.fRender.setRender(r,t||"",n),this.setHandler(r),this.addHandlerWatch(r),r.render.sync(function(){r.mounted()})}},{key:"removeField",value:function(e){if(void 0===this.handlers[e])throw new Error(e+"字段不存在");var t=this.handlers[e].watch;delete this.handlers[e],delete this.validate[e],t&&t.forEach(function(e){return e()}),this.vm.removeFormData(e),this.fRender.removeRender(e),delete this.formData[e],delete this.trueData[e]}},{key:"addHandlerWatch",value:function(e){var t=this;if(!0!==e.noValue){var n=e.field,r=this.vm.$watch("cptData."+n,(0,l.debounce)(function(o,i){if(void 0!==t.handlers[n]){var a=e.toTrueValue(o),u=JSON.stringify(a);t.vm.jsonData[n]!==u&&(t.vm.jsonData[n]=u,e.setTrueValue(a),e.watchParseValue(o))}else r()},100),{deep:!0}),o=this.vm.$watch("trueData."+n+".value",(0,l.debounce)(function(r,i){if(void 0!==r)if(void 0!==t.handlers[n]){var a=JSON.stringify(r);t.vm.jsonData[n]!==a&&(t.vm.jsonData[n]=a,e.watchTrueValue(r),t.vm.changeFormData(e.toParseValue(r)),t.vm.$nextTick(function(){return e.render.sync()}))}else o()},100),{deep:!0});e.watch=[r,o],Object.keys(this.vm.trueData[n].rule).map(function(r){if("value"!==r){var o=t.vm.$watch("trueData."+n+".rule."+r,(0,l.debounce)(function(r,i){void 0!==t.handlers[n]?t.$tick(function(){return e.render.sync()}):o()},300),{deep:!0});e.watch.push(o)}})}}},{key:"reload",value:function(e){var t=this;return e?(this.vm.unWatch(),Object.keys(this.handlers).forEach(function(e){return t.removeField(e)}),this.vm.isShow=!1,this.constructor(e,this.options),this.init(this.vm),this.vm.init(),this.vm.$nextTick(function(){t.vm.isShow=!0,setTimeout(function(){return t.mounted(t.vm)})})):this.vm.refresh(),this.vm.$f=this.fCreateApi}},{key:"getFormRef",value:function(){return this.vm.$refs[this.fRender.refName]}},{key:"fields",value:function(){return Object.keys(this.formData)}}],[{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.Vue,o=(0,l.isElement)(n)?{el:n}:n,i=new e(t,o);i.create(r);return i.fCreateApi}},{key:"install",value:function(t){console.trace("install"),t.prototype.$formCreate=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.create(n,r,t)},t.prototype.$formCreate.version="1.5.0",t.prototype.$formCreate.maker=m.default,t.component(v.formCreateName,(0,v.$FormCreate)())}}]),e}();t.default=g,g.maker=m.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return(0,u.isString)(e)?e={domProps:{innerHTML:e}}:e&&(0,u.isFunction)(e.get)&&(e=e.get()),e}function i(e){return(0,u.isFunction)(e)?e():e||[]}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.parseVData=o,t.getVNode=i;var u=n(0),s=function(){function e(t){r(this,e),this.vm=t,this.$h=t.$createElement}return a(e,[{key:"setVm",value:function(e){this.constructor(e)}},{key:"make",value:function(e,t,n){(0,u.isString)(t)&&(t={domProps:{innerHTML:t}});var r=this.$h(e,o(t),i(n));return r.context=this.vm,r}}]),e}();t.default=s;var l={modal:"Modal",progress:"i-progress",button:"i-button",icon:"Icon",span:"span",slider:"Slider",rate:"Rate",upload:"Upload",cascader:"Cascader",colorPicker:"Color-Picker",timePicker:"Time-Picker",datePicker:"Date-Picker",switch:"i-switch",option:"i-option",select:"i-select",checkbox:"Checkbox",checkboxGroup:"Checkbox-Group",radio:"Radio",radioGroup:"Radio-Group",inputNumber:"Input-Number",input:"i-input",formItem:"Form-Item",form:"i-form",col:"i-col",row:"row",tree:"Tree"};Object.keys(l).forEach(function(e){s.prototype[e]=function(t,n){return this.make(l[e],t,n)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),i=r(o),a=n(13),u=r(a),s=n(14),l=r(s),c=n(15),f=r(c),p=n(16),h=r(p),d=n(17),v=r(d),y=n(18),m=r(y),b=n(19),g=r(b),_=n(20),k=r(_),O=n(21),w=r(O),P=n(9),j=r(P),T=n(22),E=r(T),x=n(23),C=r(x),D=n(24),V=r(D),S=n(25),N=r(S),F=n(26),I=r(F),R={hidden:i.default,input:u.default,radio:l.default,checkbox:f.default,switch:h.default,select:v.default,datepicker:m.default,timepicker:g.default,inputnumber:k.default,colorpicker:w.default,upload:j.default,cascader:E.default,rate:C.default,slider:V.default,frame:N.default,tree:I.default};t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=(0,y.toString)(e).split("/"),n=t[t.length-1],r=n.indexOf(".");return-1===r?n:n.substr(0,r)}function l(e){return Array.isArray(e)?e:e?[e]:[]}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.getFileName=s,t.parseValue=l;var p=n(1),h=r(p),d=n(2),v=r(d),y=n(0),m=n(4),b=n(3),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"init",value:function(){var e=this.rule.props;e.defaultFileList=[],e.showUploadList=!1,e.uploadType=e.uploadType?e.uploadType:"file","file"===e.uploadType&&void 0===e.handleIcon&&(e.handleIcon=!1),this.parseValue=[],this.rule.value=l(this.rule.value)}},{key:"toParseValue",value:function(e){var t=this,n=l(e);return this.parseValue.splice(0,this.parseValue.length),n.forEach(function(e){return t.push(e)}),this.rule.props.defaultFileList=this.parseValue,this.parseValue}},{key:"mounted",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),console.log(this.el),this.changeParseValue(this.el.fileList)}},{key:"push",value:function(e){this.parseValue.push({url:e,name:s(e)})}},{key:"toTrueValue",value:function(e){if(!e)return[];var t=e.map(function(e){return e.url}).filter(function(e){return void 0!==e});return this.rule.props.maxLength<=1?t[0]||"":t}},{key:"changeParseValue",value:function(e){this.parseValue=e,this.vm.changeFormData(this.field,e),this.vm.getTrueData(this.field).rule.props.defaultFileList=e}},{key:"watchTrueValue",value:function(e){var n=!0;this.rule.props.defaultFileList.forEach(function(e){n=n&&(void 0===e.percentage||"finished"===e.status)}),n&&f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"watchTrueValue",this).call(this,e)}}]),t}(h.default),_=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"init",value:function(){var e=this,t=this.handler;this.uploadOptions=(0,y.extend)((0,y.extend)({},this.options.upload),this.handler.rule.props),this.issetIcon=this.uploadOptions.allowRemove||this.uploadOptions.handleIcon,this.propsData=this.vData.props(this.uploadOptions).props("onSuccess",function(){return e.onSuccess.apply(e,arguments)}).ref(t.refName).key("fip"+t.unique).get()}},{key:"onSuccess",value:function(e,t,n){var r=this.uploadOptions.onSuccess.call(null,e,t,n);(0,y.isUndef)(r)||(n.push({url:r,name:s(r)}),this.handler.changeParseValue(this.handler.el.fileList),this.sync())}},{key:"defaultOnHandle",value:function(e){var t=this;this.vm.$Modal.remove(),setTimeout(function(){t.vm.$Modal.info({title:"预览",render:function(t){return t("img",{attrs:{src:e},style:"width: 100%",key:"ifmd"+(0,y.uniqueId)()})},showCancel:!0,closable:!0,scrollable:!0})},301)}},{key:"onHandle",value:function(e){var t=this.uploadOptions.onHandle;if(t)return t(e);this.defaultOnHandle(e)}},{key:"parse",value:function(){var e=this,t=this.handler.unique;this.init(),console.log(this.uploadOptions),!0===this.uploadOptions.handleIcon&&(this.uploadOptions.handleIcon="ios-eye-outline");var n=this.vm.cptData[this.handler.field],r=[].concat(o(n.map(function(n,r){return void 0===n.status||"finished"===n.status?e.makeUploadView(n.url,""+r+t,r):n.showProgress?e.makeProgress(n,""+r+t):void 0})));return r.push(this.makeUploadBtn(t,!this.uploadOptions.maxLength||this.uploadOptions.maxLength>this.vm.cptData[this.handler.field].length)),[this.vNode.make("div",{key:"div4"+t,class:{"fc-upload":!0}},r)]}},{key:"makeUploadView",value:function(e,t,n){var r=this;return this.vNode.make("div",{key:"div1"+t,class:{"fc-files":!0}},function(){var o=[];return"image"===r.handler.rule.props.uploadType?o.push(r.vNode.make("img",{key:"img"+t,attrs:{src:e}})):o.push(r.vNode.icon({key:"file"+t,props:{type:m.iviewConfig.fileIcon,size:40}})),r.issetIcon&&o.push(r.makeIcons(e,t,n)),o})}},{key:"makeIcons",value:function(e,t,n){var r=this;return this.vNode.make("div",{key:"div2"+t,class:{"fc-upload-cover":!0}},function(){var o=[];return r.uploadOptions.handleIcon&&o.push(r.makeHandleIcon(e,t,n)),!0===r.uploadOptions.allowRemove&&o.push(r.makeRemoveIcon(e,t,n)),o})}},{key:"makeProgress",value:function(e,t){return this.vNode.make("div",{key:"div3"+t,class:{"fc-files":!0}},[this.vNode.progress({key:"upp"+t,props:{percent:e.percentage,hideInfo:!0}})])}},{key:"makeUploadBtn",value:function(e,t){return this.vNode.upload(this.propsData,!0===t?[this.vNode.make("div",{key:"div5"+e,class:{"fc-upload-btn":!0}},[this.vNode.icon({key:"upi"+e,props:{type:"file"===this.handler.rule.props.uploadType?m.iviewConfig.fileUpIcon:m.iviewConfig.imgUpIcon,size:20}})])]:[])}},{key:"makeRemoveIcon",value:function(e,t,n){var r=this;return this.vNode.icon({key:"upri"+t+n,props:{type:"ios-trash-outline"},nativeOn:{click:function(){r.handler.el.fileList.splice(n,1),r.handler.changeParseValue(r.handler.el.fileList),r.sync(),r.propsData.props.onRemove&&r.propsData.props.onRemove(r.handler.el.fileList)}}})}},{key:"makeHandleIcon",value:function(e,t,n){var r=this;return this.vNode.icon({key:"uphi"+t+n,props:{type:(0,y.toString)(this.uploadOptions.handleIcon)},nativeOn:{click:function(){r.onHandle(e)}}})}}]),t}(v.default),k={image:(0,b.creatorTypeFactory)("upload","image","uploadType"),file:(0,b.creatorTypeFactory)("upload","file","uploadType")};t.default={handler:g,render:_,maker:k,name:"upload"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formCreateName=t.$FormCreate=void 0;var r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(4),a=function(){return{name:"FormCreate",render:function(){return this.fComponent.fRender.parse(this.fComponent.vm)},props:{rule:{type:Array,required:!0,default:function(){return{}}},option:{type:Object,default:function(){return{}},required:!1},value:Object},data:i.componentCommon.data,methods:i.componentCommon.methods,created:function(){this.fComponent=new o.default(this.rule,this.option),this.fComponent._type="rule",this.fComponent.init(this)},mounted:function(){var e=this;this.fComponent.mounted(this),this.$f=this.fComponent.fCreateApi,this.$watch("rule",function(t){e.fComponent.reload(t)}),this.init()}}};t.$FormCreate=a,t.formCreateName="FormCreate"},function(e,t,n){"use strict";var r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(r);"undefined"!=typeof window&&window.Vue&&window.Vue.use(o.default),e.exports.default=e.exports=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(3),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(l.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[]}}]),t}(f.default),v=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"hidden",function(e,t){return(0,p.creatorFactory)("hidden")("",e,t)});t.default={handler:h,render:d,name:"hidden",maker:v}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.handler=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(3),h=n(0),d=t.handler=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"init",value:function(){var e=this.rule.props;e.autosize&&e.autosize.minRows&&(e.rows=e.autosize.minRows||2)}},{key:"toParseValue",value:function(e){return(0,h.toString)(e)}}]),t}(l.default),v=t.render=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.input(this.inputProps().get())]}}]),t}(f.default),y=["password","url","email","text"].reduce(function(e,t){return e[t]=(0,p.creatorTypeFactory)("input",t),e},{});y.idate=(0,p.creatorTypeFactory)("input","date"),t.default={render:v,handler:d,name:"input",maker:y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(0),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"toParseValue",value:function(e){return this.rule.options.filter(function(t){return t.value===e}).reduce(function(e,t){return t.label},"")}},{key:"toTrueValue",value:function(e){return this.rule.options.filter(function(t){return t.label===e}).reduce(function(e,t){return t.value},"")}}]),t}(l.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){var e=this,t=this.handler,n=t.unique,r=t.rule.options;return[this.vNode.radioGroup(this.inputProps().get(),function(){return r.map(function(t,r){var o=(0,p.extend)({},t);return delete o.value,e.vNode.radio({props:o,key:"ropt"+r+n})})})]}}]),t}(f.default);t.default={handler:h,render:d,name:"radio"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),f=n(2),p=r(f),h=n(0),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"toParseValue",value:function(e){return e?Array.isArray(e)||(e=[e]):e=[],this.rule.options.filter(function(t){return-1!==e.indexOf(t.value)}).map(function(e){return e.label})}},{key:"toTrueValue",value:function(e){console.trace(e,this.field);var t=this.rule.options.filter(function(t){return-1!==e.indexOf(t.label)}).map(function(e){return e.value});return 1===this.rule.options.length?void 0===t[0]?"":t[0]:t}},{key:"watchParseValue",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"watchParseValue",this).call(this,e),this.render.sync()}}]),t}(c.default),v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){var e=this,t=this.handler,n=t.unique,r=t.rule.options,o=t.key;return[this.vNode.checkboxGroup(this.inputProps().key(o).get(),function(){return r.map(function(t,r){var o=(0,h.extend)({},t);return delete o.value,e.vNode.checkbox({props:o,key:"copt"+r+n})})})]}}]),t}(p.default);t.default={handler:d,render:v,name:"checkbox"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"init",value:function(){void 0===this.rule.slot&&(this.rule.slot={})}}]),t}(l.default),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){var e=this.handler.rule.slot;return this.propsData=this.inputProps().scopedSlots({open:function(){return e.open},close:function(){return e.close}}).get(),[this.vNode.switch(this.propsData)]}}]),t}(f.default);t.default={handler:p,render:h,name:"switch"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(3),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"toParseValue",value:function(e){var t=Array.isArray(e);return!0===this.rule.props.multiple?!0===t?e:[e]:!0===t?e[0]||"":e}}]),t}(l.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){var e=this,t=this.handler,n=t.unique,r=t.rule.options;return[this.vNode.select(this.inputProps().get(),function(){return r.map(function(t,r){return e.vNode.option({props:t,key:"sopt"+r+n})})})]}}]),t}(f.default),v={selectMultiple:(0,p.creatorTypeFactory)("select",!0,"multiple"),selectOne:(0,p.creatorTypeFactory)("select",!1,"multiple")};t.default={handler:h,render:d,name:"select",maker:v}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),f=n(2),p=r(f),h=n(4),d=n(3),v=n(0),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"init",value:function(){var e=this.rule.props;e.type=e.type?(0,v.toString)(e.type).toLowerCase():"date",void 0===e.startDate&&(e.startDate=(0,h.timeStampToDate)(e.startDate))}},{key:"toParseValue",value:function(e){var t=Array.isArray(e),n=this.rule.props,r=void 0;return-1!==["daterange","datetimerange"].indexOf(n.type)?r=t?e.map(function(e){return e?(0,h.timeStampToDate)(e):""}):["",""]:"date"===n.type&&!0===n.multiple?r=(0,v.toString)(e):(r=t?e[0]||"":e,r=r?(0,h.timeStampToDate)(r):""),console.log(r,e),r}},{key:"toTrueValue",value:function(){return this.el.publicStringValue}},{key:"mounted",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),this.rule.value=this.el.publicStringValue,this.vm.changeFormData(this.field,this.toParseValue(this.el.publicStringValue))}}]),t}(c.default),m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.datePicker(this.inputProps().key(this.handler.key).get())]}}]),t}(p.default),b=["date","dateRange","dateTime","dateTimeRange","year","month"].reduce(function(e,t){return e[t]=(0,d.creatorTypeFactory)("datePicker",t.toLowerCase()),e},{});t.default={handler:y,render:m,name:"datePicker",maker:b}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return(0,d.isDate)(e)?(0,d.dateFormat)("hh:mm:ss",e):e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.getTime=u;var c=n(1),f=r(c),p=n(2),h=r(p),d=n(0),v=n(4),y=n(3),m="timePicker",b=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"init",value:function(){var e=this.rule.props;e.type||(e.type="time"),void 0===e.confirm&&(e.confirm=!0)}},{key:"toParseValue",value:function(e){var t=void 0,n=Array.isArray(e);return"timerange"===this.rule.props.type?t=n?e.map(function(e){return e?u((0,v.timeStampToDate)(e)):""}):["",""]:(n&&(e=e[0]),t=e?u((0,v.timeStampToDate)(e)):""),t}},{key:"mounted",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),this.rule.value=this.el.publicStringValue,this.vm.changeFormData(this.field,this.toParseValue(this.el.publicStringValue))}}]),t}(f.default),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"parse",value:function(){return[this.vNode.timePicker(this.inputProps().key(this.handler.key).get())]}}]),t}(h.default),_={time:(0,y.creatorTypeFactory)(m,"time"),timeRange:(0,y.creatorTypeFactory)(m,"timerange")};t.default={handler:b,render:g,maker:_,name:m}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(3),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"toParseValue",value:function(e){console.log(e);var t=parseFloat(e);return Number.isNaN(t)&&(t=0),t}}]),t}(l.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.inputNumber(this.inputProps().get())]}}]),t}(f.default),v={number:(0,p.creatorFactory)("inputNumber")};t.default={handler:h,render:d,name:"inputNumber",maker:v}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),f=n(2),p=r(f),h=n(3),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"watchParseValue",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"watchParseValue",this).call(this,e),this.render.sync()}}]),t}(c.default),v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.colorPicker(this.inputProps().key(this.handler.key).get())]}}]),t}(p.default),y={color:(0,h.creatorFactory)("colorPicker")};t.default={handler:d,render:v,name:"colorPicker",maker:y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),f=n(2),p=r(f),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"init",value:function(){var e=this.rule;e.props.data||(e.props.data=[]),Array.isArray(this.rule.value)||(this.rule.value=[])}},{key:"toParseValue",value:function(e){return Array.isArray(e)?e:[]}},{key:"mounted",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mounted",this).call(this),this.vm.changeFormData(this.field,this.toParseValue(this.el.value))}}]),t}(c.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.cascader(this.inputProps().get())]}}]),t}(p.default);t.default={handler:h,render:d,name:"cascader"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"toParseValue",value:function(e){var t=parseFloat(e);return Number.isNaN(t)&&(t=0),t}}]),t}(l.default),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.rate(this.inputProps().get())]}}]),t}(f.default);t.default={handler:p,render:h,name:"rate"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(2),f=r(c),p=n(3),h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"init",value:function(){var e=this.rule;e.props.min=void 0===e.props.min?0:parseFloat(e.props.min)||0}},{key:"toParseValue",value:function(e){var t=this.rule,n=Array.isArray(e),r=t.props,o=r.min;return!0===r.range?n?e:[o,parseFloat(e)||o]:n?parseFloat(e[0])||o:parseFloat(e)}}]),t}(l.default),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"parse",value:function(){return[this.vNode.slider(this.inputProps().get())]}}]),t}(f.default),v={sliderRange:(0,p.creatorTypeFactory)("slider",!0,"range")};t.default={handler:h,render:d,name:"slider",maker:v}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.props;t.type||(t.type="input"),t.icon||(t.icon=m.iviewConfig.fileUpIcon),t.width||(t.width="500px"),t.height||(t.height="370px"),void 0===t.spin&&(t.spin=!0),t.title||(t.title="请选择"+e.title),t.maxLength||(t.maxLength=0),t.multiple=1!=t.maxLength,"file"===t.type&&void 0===t.handleIcon?t.handleIcon=!1:t.handleIcon=!0===t.handleIcon||void 0===t.handleIcon?"ios-eye-outline":t.handleIcon,void 0===t.allowRemove&&(t.allowRemove=!0)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.parseRule=u;var c=n(1),f=r(c),p=n(2),h=r(p),d=n(0),v=n(9),y=r(v),m=n(4),b=n(3),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"init",value:function(){u(this.rule)}},{key:"toParseValue",value:function(e){var t=void 0,n=e,r=Array.isArray(n);return t=""===n?[]:r?n:[n],this.parseValue=t,t}},{key:"toTrueValue",value:function(e){return!0===this.rule.props.multiple?e:void 0===e[0]?"":e[0]}},{key:"watchTrueValue",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"watchTrueValue",this).call(this,e),this.render.sync()}},{key:"watchParseValue",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"watchParseValue",this).call(this,e),this.parseValue=e,this.render.sync()}}]),t}(f.default),_={onOpen:"on-open",onChange:"on-change",onCancel:"on-cancel",onOk:"on-ok"},k=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"init",value:function(){var e=this,t=this.handler.field,n=!1;this.vm.$watch("cptData."+t,function(){!0===n&&e.onChange(),n=!0}),this._props=this.handler.rule.props,this.issetIcon=!1!==this._props.handleIcon||!0===this._props.allowRemove}},{key:"parse",value:function(){var e=this._props.type;return"image"===e?this.makeGroup(this.makeImage()):"file"===e?this.makeGroup(this.makeFile()):this.makeInput()}},{key:"makeInput",value:function(e){var t=this,n=this.handler.unique,r=this.inputProps().props({type:"text",value:this.handler.parseValue.toString(),icon:this._props.icon,readonly:!0,clearable:!0}).on("on-click",function(){t.showModel()}).key("ifit"+n).style({display:!0===e?"none":"inline-block"}).get();return[this.vNode.input(r)]}},{key:"makeGroup",value:function(e){var t=this.handler.unique,n=this.handler.field;return[this.vNode.make("div",{key:"ifgp1"+t,class:{"fc-upload fc-frame":!0},ref:this.handler.refName,props:{value:this.vm.cptData[n]}},e),this.makeInput(!0)]}},{key:"makeImage",value:function(){var e=this,t=this.handler.unique,n=this.handler.parseValue.map(function(n,r){return e.vNode.make("div",{key:"ifid1"+t+r,class:{"fc-files":!0}},[e.vNode.make("img",{key:"ifim"+t+r,attrs:{src:n}}),e.makeIcons(n,t,r)])});return n.push(this.makeBtn()),n}},{key:"makeFile",value:function(){var e=this,t=this.handler.unique,n=this.handler.parseValue.map(function(n,r){return e.vNode.make("div",{key:"iffd2"+t+r,class:{"fc-files":!0}},[e.vNode.icon({key:"iff"+t+r,props:{type:m.iviewConfig.fileIcon,size:40}}),e.makeIcons(n,t,r)])});return n.push(this.makeBtn()),n}},{key:"makeBtn",value:function(){var e=this,t=this.handler.rule.props;if(!(t.maxLength>0&&this.handler.parseValue.length>=t.maxLength)){var n=this.handler.unique;return this.vNode.make("div",{key:"ifbd3"+n,class:{"fc-upload-btn":!0},on:{click:function(){e.showModel()}}},[this.vNode.icon({key:"ifbi"+n,props:{type:this._props.icon,size:20}})])}}},{key:"makeSpin",value:function(){if(!0===this._props.spin){var e=this.handler.unique;return this.vNode.make("Spin",{props:{fix:!0},key:"ifsp"+e,class:{"fc-spin":!0}},[this.vNode.icon({props:{type:"load-c",size:18},class:{"fc-spin-icon-load":!0},key:"ifspi"+e}),this.vNode.make("div",{domProps:{innerHTML:"加载中..."},key:"ifspd"+e})])}}},{key:"makeIcons",value:function(e,t,n){var r=this;if(!0===this.issetIcon)return this.vNode.make("div",{key:"ifis"+t+n,class:{"fc-upload-cover":!0}},function(){var o=[];return!1!==r._props.handleIcon&&o.push(r.makeHandleIcon(e,t,n)),!0===r._props.allowRemove&&o.push(r.makeRemoveIcon(e,t,n)),o})}},{key:"makeRemoveIcon",value:function(e,t,n){var r=this;return this.vNode.icon({key:"ifri"+t+n,props:{type:"ios-trash-outline"},nativeOn:{click:function(){!1!==r.onRemove(e)&&(r.handler.parseValue.splice(n,1),r.sync())}}})}},{key:"makeHandleIcon",value:function(e,t,n){var r=this,o=this._props;return this.vNode.icon({key:"ifhi"+t+n,props:{type:toString(o.handleIcon)},nativeOn:{click:function(){r.onHandle(e)}}})}},{key:"onRemove",value:function(e){var t=this.handler.rule.event["on-remove"];if(t)return t(e,this.handler.getValue())}},{key:"onHandle",value:function(e){var t=this.handler.rule.event["on-handle"];if(t)return t(e);this.defaultOnHandle(e)}},{key:"showModel",value:function(){var e=this,t=!1!==this.onOpen(),n=this._props,r=n.width,o=n.height,i=n.src,a=n.title;t&&(this.vm.$Modal.remove(),setTimeout(function(){e.vm.$Modal.confirm({title:a,render:function(){return[e.makeSpin(),e.vNode.make("iframe",{attrs:{src:i},style:{height:o,border:"0 none",width:"100%"},on:{load:function(){if(!0===e._props.spin){var t=document.getElementsByClassName("fc-spin")[0];t&&t.parentNode.removeChild(t)}}},key:"ifmd"+(0,d.uniqueId)()})]},onOk:function(){return e.onOk()},onCancel:function(){return e.onCancel()},showCancel:!0,closable:!0,scrollable:!0,width:r})},301))}}]),t}(h.default);k.prototype.defaultOnHandle=y.default.render.prototype.defaultOnHandle,Object.keys(_).forEach(function(e){k.prototype[e]=function(){var t=this.handler.rule.event[_[e]];if(t)return t(this.handler.getValue())}});var O={frameInputs:["input",0],frameFiles:["file",0],frameImages:["image",0],frameInputOne:["input",1],frameFileOne:["file",1],frameImageOne:["image",1]},w=Object.keys(O).reduce(function(e,t){return e[t]=(0,b.creatorTypeFactory)("frame",function(e){return e.props({type:O[t][0],maxLength:O[t][1]})}),e},{});t.default={handler:g,render:k,name:"frame",maker:w}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.props;return void 0===t.data&&(t.data=[]),void 0===t.type&&(t.type="checked"),void 0===t.multiple&&(t.multiple=!1),l(e)&&Array.isArray(e.value)&&(e.value=this.rule.value[0]||""),e.value=(0,v.toArray)(e.value),e}function l(e){return!e.props.multiple&&"selected"===e.props.type}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.parseRule=s,t.isMultiple=l;var f=n(1),p=r(f),h=n(2),d=r(h),v=n(0),y=n(3),m=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"init",value:function(){s(this.rule),this._data={},this.data(this.rule.props.data),this._parseValue()}},{key:"_parseValue",value:function(){var e=this;this.rule.value.forEach("selected"===this.rule.props.type?function(t){return e.selected(t)}:function(t){return e.checked(t)});var t=[];"selected"===this.rule.props.type?Object.keys(this._data).forEach(function(n){var r=e._data[n];!0===r.selected&&t.push(r.id)}):Object.keys(this._data).forEach(function(n){var r=e._data[n];!0===r.checked&&t.push(r.id)}),this.rule.value=t}},{key:"toParseValue",value:function(e){return e=(0,v.toArray)(e),this.choose(e),this.parseValue=e,e}},{key:"choose",value:function(e){var t=this,n=this.rule,r=this._data;"selected"===n.props.type?Object.keys(r).forEach(function(n){t.vm.$set(r[n],"selected",-1!==e.indexOf(r[n].id))}):Object.keys(r).forEach(function(n){t.vm.$set(r[n],"checked",-1!==e.indexOf(r[n].id))})}},{key:"checked",value:function(e){void 0!==this._data[e]&&this.vm.$set(this._data[e],"checked",!0)}},{key:"selected",value:function(e){void 0!==this._data[e]&&this.vm.$set(this._data[e],"selected",!0)}},{key:"toTrueValue",value:function(e){var t=e;return l(this.rule)?t[0]||"":t}},{key:"watchParseValue",value:function(e){this.choose(e)}},{key:"selectedNodeToValue",value:function(e){var t=[];return e.forEach(function(e){!0===e.selected&&t.push(e.id)}),t}},{key:"checkedNodeToValue",value:function(e){var t=[];return e.forEach(function(e){!0===e.checked&&t.push(e.id)}),t}},{key:"toValue",value:function(){return"selected"===this.rule.props.type?this.selectedNodeToValue(this.el.getSelectedNodes()):this.checkedNodeToValue(this.el.getCheckedNodes())}},{key:"data",value:function(e){var t=this;e.forEach(function(e){t._data[e.id]=e,void 0!==e.children&&Array.isArray(e.children)&&t.data(e.children)})}}]),t}(p.default),b={s:"on-select-change",c:"on-check-change"},g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"parse",value:function(){var e,t=this,n=this.handler,r=n.rule,i=n.refName,a=n.field,u=n.unique,s=this.vData.on(r.event).on((e={},o(e,b.s,function(e){t.vm.changeFormData(a,t.handler.toValue()),r.event[b.s]&&r.event[b.s](e)}),o(e,b.c,function(e){t.vm.changeFormData(a,t.handler.toValue()),r.event[b.c]&&r.event[b.c](e)}),e)).props(r.props).ref(i).key("fip"+u).get(),l=this.inputProps().props({type:"text",value:this.handler.parseValue.toString(),disable:!0}).key("fipit"+u).style({display:"none"}).ref(i+"it").get();return[this.vNode.tree(s),this.vNode.input(l)]}}]),t}(d.default),_={treeSelected:"selected",treeChecked:"checked"},k=Object.keys(_).reduce(function(e,t){return e[t]=(0,y.creatorTypeFactory)("tree",_[t]),e},{});t.default={handler:m,render:g,name:"tree",maker:k}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return t.reduce(function(t,n){return t[n]=e[n].render,t},{})}function a(e){e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getRenders=i,t.preventDefault=a;var s=n(0),l=n(7),c=r(l),f=n(5),p=r(f),h=function(){function e(t){var n=t.vm,r=t.options,a=t.fieldList,u=t.handlers,l=t.formData,f=t.validate,h=t.fCreateApi;o(this,e),this.vm=n,this.options=r,this.handlers=u,this.renderSort=a,this.renders=i(u,a),this.form={model:l,rules:f,key:"form"+(0,s.uniqueId)()},this.fCreateApi=h,this.vNode=new c.default(n),this.vData=new p.default,this.unique=(0,s.uniqueId)(),this.refName="cForm"+this.unique,this.cacheUnique=0}return u(e,[{key:"parse",value:function(e){var t=this;if(this.vNode.setVm(e),e.isShow){console.log("parse----------------"),this.cacheUnique!==e.unique&&(this.renderSort.map(function(e){t.renders[e].clearCache()}),this.cacheUnique=e.unique);var n=this.unique,r=this.vData.props(this.options.form).props(this.form).ref(this.refName).nativeOn({submit:a}).class("form-create",!0).key(n).get(),o=this.renderSort.map(function(e){var r=t.renders[e],o=r.handler,i=o.key;if("hidden"!==o.type)return t.makeFormItem(r.handler,r.cacheParse(),"fItem"+i+n)});return o.length>0&&o.push(this.makeFormBtn(n)),this.vNode.form(r,[this.vNode.row({props:this.options.row||{}},o)])}}},{key:"makeFormItem",value:function(e,t,n){var r=e.rule,o=e.unique,i=e.field,a=e.refName,u=this.vData.props({prop:i,label:r.title,labelFor:o,rules:r.validate,labelWidth:r.col.labelWidth,required:r.props.required}).key(n).ref("fItem"+a).get();return this.vNode.col({props:r.col,class:{__fc_h:!0===r.props.hidden,__fc_v:!0===r.props.visibility},key:n+"col"},[this.vNode.formItem(u,t)])}},{key:"makeFormBtn",value:function(e){var t=[],n=!1!==this.vm.buttonProps&&!1!==this.vm.buttonProps.show,r=!1!==this.vm.resetProps&&!1!==this.vm.resetProps.show;return n&&t.push(this.makeSubmitBtn(e,r?19:24)),r&&t.push(this.makeResetBtn(e,4)),this.vNode.col({props:{span:24}},t)}},{key:"makeResetBtn",value:function(e,t){var n=this;return this.vNode.col({props:{span:t,push:1}},[this.vNode.button({key:"frsbtn"+e,props:this.vm.resetProps,on:{click:function(){n.fCreateApi.resetFields()}}},[this.vNode.span(this.vm.resetProps.innerText)])])}},{key:"makeSubmitBtn",value:function(e,t){var n=this;return this.vNode.col({props:{span:t}},[this.vNode.button({key:"fbtn"+e,props:this.vm.buttonProps,on:{click:function(){n.fCreateApi.submit()}}},[this.vNode.span(this.vm.buttonProps.innerText)])])}},{key:"removeRender",value:function(e){delete this.renders[e],this.renderSort.splice(this.renderSort.indexOf(e),1)}},{key:"setRender",value:function(e,t,n){this.renders[e.field]=e.render,void 0!==t&&this.changeSort(e.field,t,n)}},{key:"changeSort",value:function(e,t,n){var r=this.renderSort.indexOf((0,s.toString)(t));-1!==r?this.renderSort.splice(!1===n?r+1:r,0,e):n?this.renderSort.unshift(e):this.renderSort.push(e)}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return{name:o.formCreateName+"Core",data:i.componentCommon.data,render:function(){return e.fRender.parse(e.vm)},methods:i.componentCommon.methods,created:function(){this.fComponent=e,this.fComponent._type="rules",e.init(this)},mounted:function(){var t=this;e.mounted(this),this.$f=e.fCreateApi,this.init(),this.$watch("rules",function(e){t.fComponent.reload(e)})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(10),i=n(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(0),u=function(){var e={};Object.keys(i.default).forEach(function(t){var n=i.default[t],o=(0,a.isUndef)(n.maker);(o||void 0===n.maker[n.name])&&(e[n.name]=(0,r.creatorFactory)(n.name)),o||(0,a.extend)(e,n.maker)});var t=(0,r.creatorFactory)("");return(0,a.extend)(e,{create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tmp"+(0,a.uniqueId)(),n=(0,r.creatorFactory)("")("",t);return n.rule.type=e,n.col({labelWidth:1}),n},createTmp:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tmp"+(0,a.uniqueId)(),o=t("",r);return o.rule.type="__tmp",o.rule.template=e,o.rule._vm=n,o.col({labelWidth:1}),o}}),e}();t.default=u}])});