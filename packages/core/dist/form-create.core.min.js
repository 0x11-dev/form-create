/*!
 * @form-create/core v0.0.2
 * (c) 2018-2019 xaboy
 * Github https://github.com/xaboy/form-create
 * Released under the MIT License.
 */
import t from"@vue/babel-helper-vue-jsx-merge-props";import e from"vue";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,r,n){e.set(t,r,n)}function d(t,r){e.delete(t,r)}function v(t){return Array.isArray(t)&&t.length>0}var p=Object.prototype.toString;function m(t){return null==t}function y(t){return null==t?"":"object"===r(t)?JSON.stringify(t,null,2):String(t)}function b(t,e){for(var r in e)f(t,r,e[r]);return t}function k(t,e){return p.call(t)==="[object "+e+"]"}function _(t){return k(t,"Object")}function g(t){return k(t,"Function")}function $(t){return k(t,"String")}function C(t){return k(t,"Boolean")}function w(t){return"object"===r(t)&&null!==t&&1===t.nodeType&&!_(t)}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];if((r=Array.isArray(i))||_(i)){var o=void 0===t[n];r?(r=!1,o&&f(t,n,[])):o&&f(t,n,{}),O(t[n],i)}else f(t,n,i)}return t}var A=0;function D(){return++A}function P(t){return"\ngithub:https://github.com/xaboy/form-create\ndocument:http://www.form-create.com"+(t||"")}var j="FormCreate";var E=function(){function t(){n(this,t),this.init()}return o(t,[{key:"class",value:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m(t)?this:(Array.isArray(t)?t.forEach(function(t){f(e._data.class,y(t),!0)}):_(t)?f(this._data,"class",b(this._data.class,t)):f(this._data.class,y(t),void 0===r||r),this)}},{key:"directives",value:function(t){return m(t)?this:(f(this._data,"directives",this._data.directives.concat((e=t,Array.isArray(e)?e:m(e)||""===e?[]:[e]))),this);var e}},{key:"init",value:function(){return this._data={class:{},style:{},attrs:{},props:{},domProps:{},on:{},nativeOn:{},directives:[],scopedSlots:{},slot:void 0,key:void 0,ref:void 0},this}},{key:"get",value:function(){var t=this,e=Object.keys(this._data).reduce(function(e,r){var n=t._data[r];return void 0===n?e:Array.isArray(n)&&!n.length?e:Object.keys(n).length||"props"===r?(e[r]=n,e):e},{});return this.init(),e}}]),t}();function V(t){return function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new S(t,e,r,n,i)}}function L(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return function(n,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new S(t,n,i,o,a);return g(e)?e(s):s.props(r,e),s}}["ref","key","slot"].forEach(function(t){E.prototype[t]=function(e){return f(this._data,t,e),this}}),["scopedSlots","nativeOn","on","domProps","props","attrs","style"].forEach(function(t){E.prototype[t]=function(e,r){return m(e)?this:(_(e)?f(this._data,t,b(this._data[t],e)):f(this._data[t],y(e),r),this)}});var S=function(t){function e(t,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n(this,e),b((a=h(this,u(e).call(this)))._data,{validate:[],options:[],col:{},children:[],emit:[],template:void 0,emitPrefix:void 0,native:!1}),b(a._data,{type:t,title:r,field:i,value:o}),_(s)&&a.props(s),a}return s(e,E),o(e,[{key:"type",value:function(t){return this.props("type",t),this}},{key:"getRule",value:function(){return this._data}},{key:"event",value:function(){return this.on.apply(this,arguments),this}}]),e}();["emitPrefix","className","value","name","title","native"].forEach(function(t){S.prototype[t]=function(e){return f(this._data,t,e),this}});["col"].forEach(function(t){S.prototype[t]=function(e){return f(this._data,t,b(this._data[t],e)),this}});function N(){var t={},e=V("");return b(t,{create:function(t,r,n){var i=e("",r);return i._data.type=t,i._data.title=n,i},createTmp:function(t,r,n,i){var o=e("",n);return o._data.type="template",o._data.template=t,o._data.title=i,o._data.vm=r,o}}),t.template=t.createTmp,t.parse=R,t}function R(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if($(t)&&(t=JSON.parse(t)),t instanceof S)return e?t:t.getRule();if(_(t)){var r=function(t){var e=new S;return Object.keys(t).forEach(function(r){e._data[r]=t[r]}),e}(t);return e?r:r.getRule()}if(Array.isArray(t)){var n=t.map(function(t){return R(t,e)});return Object.defineProperty(n,"find",{value:F,enumerable:!1,configurable:!1}),n}return t}function F(t){var e=[];for(var r in this){var n=this[r]instanceof S?this[r].rule:this[r];if(n.field===t)return this[r];v(n.children)&&(e=e.concat(n.children))}if(e.length>0)return F.call(e,t)}["validate","options","children","emit"].forEach(function(t){S.prototype[t]=function(e){return Array.isArray(e)||(e=[e]),f(this._data,t,this._data[t].concat(e)),this}});var x,T,q,B=function(){function t(e){n(this,t),e&&this.setVm(e)}return o(t,[{key:"setVm",value:function(t){this.vm=t,this.$h=t.$createElement}},{key:"make",value:function(t,e,r){var n,i=this.$h(t,function(t){return $(t)?t={domProps:{innerHTML:t}}:t&&g(t.get)&&(t=t.get()),t}(e),g(n=r)?n():n||[]);return i.context=this.vm,i}}],[{key:"use",value:function(e){Object.keys(e).forEach(function(r){t.prototype[y(r).toLocaleLowerCase()]=t.prototype[r]=function(t,n){return this.make(e[r],t,n)}})}}]),t}(),I=function(){function t(e,r,i){n(this,t),this.rule=r,this.vData=new E,this.vNode=new B,this.id=i,this.watch=[],this.type=y(r.type).toLocaleLowerCase(),this.isDef=!0,this.el=void 0,r.field?this.field=r.field:(this.field="_def_"+D(),this.isDef=!1),this.name=r.name,this.unique="fc_"+i,this.key="key_"+i,this.refName="__"+this.field+this.id,this.formItemRefName="fi"+this.refName,this.update(e),this.init()}return o(t,[{key:"update",value:function(t){this.$handle=t,this.$render=t.$render,this.vm=t.vm,this.options=t.options,this.vNode.setVm(this.vm),this.deleted=!1}},{key:"init",value:function(){}},{key:"toFormValue",value:function(t){return t}},{key:"toValue",value:function(t){return t}}]),t}(),G=(x=function(t){return t()},T=1,q=null,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];null!==q&&clearTimeout(q),q=setTimeout(function(){return x.apply(void 0,e)},T)}),J=function(){function t(e){n(this,t),this.$handle=e,this.fc=e.fc,this.vm=e.vm,this.options=e.options,this.$form=e.$form,this.vNode=new B(this.vm),this.vData=new E,this.cache={},this.renderList={}}return o(t,[{key:"clearCache",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.cache[t.id]){this.cacheStatus(t)&&this.$handle.refresh();var r=this.cache[t.id].parent;this.cache[t.id]=null,r&&e&&this.clearCache(r,e)}}},{key:"clearCacheAll",value:function(){this.cache={}}},{key:"setCache",value:function(t,e,r){this.cache[t.id]={vnode:e,use:!1,parent:r}}},{key:"cacheStatus",value:function(t){return this.cache[t.id]&&(!0===this.cache[t.id].use||this.cache[t.id].parent)}},{key:"getCache",value:function(t){var e=this.cache[t.id];return e.use=!0,e.vnode}},{key:"initOrgChildren",value:function(){var t=this.$handle.parsers;this.orgChildren=Object.keys(t).reduce(function(e,r){var n=t[r].rule.children;return e[r]=v(n)?l(n):[],e},{})}},{key:"run",value:function(){var t=this;if(this.vm.isShow){this.$form.beforeRender();var e=this.$handle.sortList.map(function(e){var r=t.$handle.parsers[e];if("hidden"!==r.type)return t.renderParser(r)}).filter(function(t){return void 0!==t});return this.$form.render(e)}}},{key:"setGlobalConfig",value:function(t){this.options.global&&(this.options.global["*"]&&this.toData(t,this.options.global["*"]),this.options.global[t.type]&&this.toData(t,this.options.global[t.type]))}},{key:"renderTemplate",value:function(t){var e=this,r=t.id,n=t.rule,i=t.key;if(void 0===H.compile)return console.error("使用的 Vue 版本不支持 compile"+P()),[];this.renderList[r]||(m(n.vm)&&(n.vm=new H),this.renderList[r]=H.compile(n.template)),function(t){var e=t.rule;if(!e.vm.$props)return;var r=Object.keys(e.vm.$props);r.forEach(function(t){void 0!==e.props[t]&&(e.vm.$props[t]=e.props[t])}),-1!==r.indexOf("value")&&(e.vm.$props.value=t.rule.value)}(t),n.vm.$off("input"),n.vm.$on("input",function(r){e.onInput(t,r)});var o=this.renderList[r].render.call(n.vm);return void 0===o.data&&(o.data={}),o.key=i,o}},{key:"renderParser",value:function(t,e){if(t.vData.get(),this.setGlobalConfig(t),!this.cache[t.id]||"template"===t.type){var r,n=t.type,i=t.rule,o=this.$form;if("template"===n&&i.template){if(r=this.renderTemplate(t),e)return this.setCache(t,r,e),r}else if(this.$handle.isNoVal(t)){if(r=this.vNode.make(n,this.inputVData(t),this.renderChildren(t)),e)return this.setCache(t,r,e),r}else{var a=this.renderChildren(t);r=t.render?t.render(a):this.defaultRender(t,a)}return!0!==i.native&&(r=o.container(r,t)),this.setCache(t,r,e),r}return this.getCache(t)}},{key:"toData",value:function(t,e){return Object.keys(t.vData._data).forEach(function(r){void 0!==e[r]&&t.vData[r](e[r])}),t.vData}},{key:"parserToData",value:function(t){return this.toData(t,t.rule)}},{key:"inputVData",value:function(t,e){var r=this,n=t.refName,i=t.key;this.parserToData(t);var o=t.vData.ref(n).key("fc_item"+i);return e||o.on("input",function(e){r.onInput(t,e)}).props("value",this.$handle.getFormData(t)),this.$form.inputVData&&this.$form.inputVData(t,e),o}},{key:"onInput",value:function(t,e){this.$handle.onInput(t,e)}},{key:"renderChildren",value:function(t){var e=this,r=t.rule.children,n=this.orgChildren[t.id];return v(r)?(this.orgChildren[t.id].forEach(function(t){-1===r.indexOf(t)&&!$(t)&&t.__fc__&&e.$handle.removeField(t.__fc__)}),r.map(function(r){return $(r)?r:r.__fc__?e.renderParser(r.__fc__,t):void G(function(){return e.$handle.reloadRule()})})):(n.forEach(function(t){!$(t)&&t.__fc__&&e.$handle.removeField(t.__fc__)}),this.orgChildren[t.id]=[],[])}},{key:"defaultRender",value:function(t,e){return this.vNode[t.type]?this.vNode[t.type](this.inputVData(t),e):this.vNode.make(t.type,this.inputVData(t),e)}}]),t}();var W=function(){function t(e){n(this,t);var r=e.vm,i=e.rules,o=e.options;this.vm=r,this.fc=e,this.id=D(),this.options=o,this.validate={},this.formData={},this.fCreateApi=void 0,this.__init(i),this.$form=new e.drive.formRender(this,this.id),this.$render=new J(this),this.loadRule(this.rules,!1),this.$render.initOrgChildren(),this.$form.init()}return o(t,[{key:"__init",value:function(t){this.fieldList={},this.trueData={},this.parsers={},this.customData={},this.sortList=[],this.rules=t,this.origin=l(this.rules),this.changeStatus=!1}},{key:"loadRule",value:function(t,e){var r=this;t.map(function(t){if(!e||!$(t)){if(!t.type)return console.error("未定义生成规则的 type 字段"+P());var n;if(t.__fc__){if((n=t.__fc__).vm!==r.vm&&!n.deleted)return console.error("".concat(t.type,"规则正在其他的 <form-create> 中使用")+P());n.update(r)}else n=r.createParser(r.parseRule(t));var i=n.rule.children,o=n.rule;return r.notField(n.field)?(r.setParser(n),t.__fc__||function(t,e){Object.defineProperties(t,{__field__:{value:e.field,enumerable:!1,configurable:!1},__fc__:{value:e,enumerable:!1,configurable:!1}})}(t,n),v(i)&&r.loadRule(i,!0),e||r.sortList.push(n.id),r.isNoVal(n)||Object.defineProperty(n.rule,"value",{get:function(){return n.toValue(r.getFormData(n))},set:function(t){r.isChange(n,t)&&(r.$render.clearCache(n,!0),r.setFormData(n,n.toFormValue(t)))}}),n):console.error("".concat(o.field," 字段已存在")+P())}}).filter(function(t){return t}).forEach(function(e){e.root=t})}},{key:"createParser",value:function(t){var e=this.id+""+D(),r=this.fc.parsers,n=y(t.type).toLocaleLowerCase();return new(r[n]?r[n]:I)(this,t,e)}},{key:"parseRule",value:function(t){var e={validate:[],col:{},emit:[],props:{},on:{},options:[],title:"",value:"",field:"",name:"",className:""},r=function(t){return g(t.getRule)?t.getRule():t}(t);Object.keys(e).forEach(function(t){m(r[t])&&f(r,t,e[t])});var n,i={options:(n=r.options,Array.isArray(n)?n:[])};return i.on=function(t,e){Object.keys(e).length>0&&b(t,e);return t}(r.on,this.parseEmit(r)),Object.keys(i).forEach(function(t){f(r,t,i[t])}),r}},{key:"parseEmit",value:function(t){var e=this,r={},n=t.emit,i=t.emitPrefix,o=t.field;return Array.isArray(n)?(n.forEach(function(t){var n,a,s=(n="".concat(i||o,"-").concat(t),a=n.replace(/([A-Z])/g,"-$1").toLowerCase(),0===a.indexOf("-")&&(a=a.substr(1)),a).replace("_","-");r[t]=function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=e.vm).$emit.apply(t,[s].concat(n))}}),r):r}},{key:"run",value:function(){return this.vm.unique>0?this.$render.run():(this.vm.unique=1,[])}},{key:"setParser",value:function(t){var e=t.id,r=t.field,n=t.name,i=t.rule;this.parsers[e]||(this.parsers[e]=t,this.isNoVal(t)?n&&f(this.customData,n,t):(this.fieldList[r]=t,f(this.formData,r,t.toFormValue(i.value)),f(this.validate,r,i.validate||[]),f(this.trueData,r,t)))}},{key:"notField",value:function(t){return void 0===this.parsers[t]}},{key:"isChange",value:function(t,e){return JSON.stringify(t.rule.value)!==JSON.stringify(e)}},{key:"onInput",value:function(t,e){!this.isNoVal(t)&&this.isChange(t,t.toValue(e))&&(this.$render.clearCache(t),this.setFormData(t,e),this.changeStatus=!0)}},{key:"getParser",value:function(t){return this.fieldList[t]?this.fieldList[t]:this.customData[t]?this.customData[t]:this.parsers[t]?this.parsers[t]:void 0}},{key:"created",value:function(){var t=this.vm;t.$set(t,"buttonProps",this.options.submitBtn),t.$set(t,"resetProps",this.options.resetBtn),t.$set(t,"formData",this.formData),void 0===this.fCreateApi&&(this.fCreateApi=this.fc.drive.getGlobalApi(this)),this.fCreateApi.rule=this.rules,this.fCreateApi.config=this.options}},{key:"addParserWitch",value:function(t){var e=this,r=this.vm;Object.keys(t.rule).forEach(function(n){-1===["field","type","value","vm","template","name","config"].indexOf(n)&&void 0!==t.rule[n]&&t.watch.push(r.$watch(function(){return t.rule[n]},function(r,n){void 0!==n&&e.$render.clearCache(t)},{deep:!0,immediate:!0}))})}},{key:"mountedParser",value:function(){var t=this,e=this.vm;Object.keys(this.parsers).forEach(function(r){var n=t.parsers[r];0===n.watch.length&&t.addParserWitch(n),n.el=e.$refs[n.refName]||{},void 0===n.defaultValue&&(n.defaultValue=O({},{value:n.rule.value}).value),n.mounted&&n.mounted()})}},{key:"mounted",value:function(){var t=this.options.mounted;this.mountedParser(),t&&t(this.fCreateApi),this.fc.$emit("mounted",this.fCreateApi)}},{key:"reload",value:function(){var t=this.options.onReload;this.mountedParser(),t&&t(this.fCreateApi),this.fc.$emit("on-reload",this.fCreateApi)}},{key:"removeField",value:function(t){var e=t.id,r=t.field,n=this.sortList.indexOf(e);!function(t){t.watch.forEach(function(t){return t()}),t.watch=[],t.deleted=!0,Object.defineProperty(t.rule,"value",{value:b({},{value:t.rule.value}).value})}(t),d(this.parsers,e),d(this.validate,r),-1!==n&&this.sortList.splice(n,1),d(this.formData,r),d(this.customData,r),d(this.fieldList,r),d(this.trueData,r)}},{key:"refresh",value:function(){this.vm._refresh()}},{key:"reloadRule",value:function(t){var e=this,r=this.vm;if(!t)return this.reloadRule(this.rules);this.origin.length||this.fCreateApi.refresh(),this.origin=l(t);var n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){a(t,e,r[e])})}return t}({},this.parsers);this.__init(t),this.loadRule(t,!1),Object.keys(n).filter(function(t){return void 0===e.parsers[t]}).forEach(function(t){return e.removeField(n[t])}),this.$render.initOrgChildren(),this.created(),r.$nextTick(function(){e.reload()}),r.$f=this.fCreateApi,this.$render.clearCacheAll(),this.refresh()}},{key:"setFormData",value:function(t,e){this.formData[t.field]=e}},{key:"getFormData",value:function(t){return this.formData[t.field]}},{key:"fields",value:function(){return Object.keys(this.formData)}},{key:"isNoVal",value:function(t){return!t.isDef}}]),t}();var H="undefined"!=typeof window&&window.Vue?window.Vue:e;var M=function(){function t(e){n(this,t),this.$handle=e,this.vm=e.vm,this.drive=this.$handle.fc.drive,this.options=e.options,this.vNode=new B(this.vm),this.vData=new E,this.unique=e.id}return o(t,[{key:"init",value:function(){this.$render=this.$handle.$render}},{key:"getGetCol",value:function(t){var e=t.rule.col||{},r={},n={};return this.options.global?(this.options.global["*"]&&(r=this.options.global["*"].col||{}),this.options.global[t.type]&&(n=this.options.global[t.type].col||{}),e=O(O(O({},r),n),e)):e}},{key:"beforeRender",value:function(){}},{key:"render",value:function(){}},{key:"inputVData",value:function(){}}]),t}();export default function(e){var r={},i={},a=N(),c=e.getConfig(),l={};function d(t,e){t=y(t),i[t.toLocaleLowerCase()]=e,A.maker[t]=V(t)}function v(){return function(t){function e(){return n(this,e),h(this,u(e).apply(this,arguments))}return s(e,I),e}()}function p(t,e){var n=(t=y(t)).toLocaleLowerCase();return"form-create"===n||"formcreate"===n?k():void 0===e?r[t]:void(r[t]=e)}function m(t,e){C(e.sumbitBtn)&&(e.sumbitBtn={show:e.sumbitBtn}),C(e.resetBtn)&&(e.resetBtn={show:e.resetBtn});var r=O(t,e);return f(r,"el",r.el?w(r.el)?r.el:document.querySelector(r.el):window.document.body),r}function k(){return H.extend(function(t,e){return{name:j,props:{rule:{type:Array,required:!0,default:function(){return{}}},option:{type:Object,default:function(){return{}},required:!1},value:Object},data:function(){return{formData:void 0,buttonProps:void 0,resetProps:void 0,$f:void 0,isShow:!0,unique:1}},components:e,render:function(){return this.formCreate.render()},methods:{_buttonProps:function(t){this.$set(this,"buttonProps",O(this.buttonProps,t))},_resetProps:function(t){this.$set(this,"resetProps",O(this.resetProps,t))},_refresh:function(){this.unique+=1}},watch:{option:"_refresh",rule:function(t){this.formCreate.handle.reloadRule(t)}},beforeCreate:function(){var e=this.$options.propsData,r=e.rule,n=e.option;this.formCreate=new t(r,n),this.formCreate.beforeCreate(this)},created:function(){this.formCreate.created(),this.$f=this.formCreate.api(),this.$emit("input",this.$f)},mounted:function(){this.formCreate.mounted(),this.$emit("input",this.$f)},beforeDestroy:function(){this.formCreate.handle.reloadRule([]),this.formCreate.handle.$render.clearCacheAll()}}}(A,r))}function g(t){b(t,{version:e.version,ui:e.ui,maker:a,component:p,setParser:d,createParser:v,data:l,$form:function(){return k()}})}function $(e,r){var n=new H({data:function(){return{rule:e,option:w(r)?{el:r}:r}},render:function(){return(0,arguments[0])("form-create",t([{ref:"fc"},{props:this.$data}]))}});return n.$mount(),n}var A=function(){function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.fCreateApi=void 0,this.drive=e,this.parsers=i,this.vm=void 0,this.rules=Array.isArray(r)?r:[],this.options=m(O({},c),o)}return o(t,[{key:"beforeCreate",value:function(t){this.vm=t,this.handle=new W(this)}},{key:"created",value:function(){this.handle.created()}},{key:"api",value:function(){return this.handle.fCreateApi}},{key:"render",value:function(){return this.handle.run()}},{key:"mounted",value:function(){this.handle.mounted()}},{key:"$emit",value:function(t){for(var e,r,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.$parent&&(e=this.$parent).$emit.apply(e,["fc:".concat(t)].concat(i)),(r=this.vm).$emit.apply(r,[t].concat(i))}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=$(t,e),i=n.$refs.fc.formCreate;return i.parent=r,i.options.el.appendChild(n.$el),i.handle.fCreateApi}},{key:"install",value:function(e){var r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,r,this)};g(r),e.prototype.$formCreate=r,e.component(j,k()),H=e}},{key:"init",value:function(t){var e=$(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=e.$refs.fc.formCreate;return{mount:function(t){return t&&w(t)&&(r.options.el=t),r.options.el.appendChild(e.$el),r.handle.fCreateApi},remove:function(){r.options.el.removeChild(e.$el)},destroy:function(){this.remove(),e.$destroy()},$f:r.handle.fCreateApi}}}]),t}();return g(A),e.components.forEach(function(t){A.component(t.name,t)}),e.parsers.forEach(function(t){var e=t.name,r=t.parser;A.setParser(e,r)}),Object.keys(e.makers).forEach(function(t){A.maker[t]=e.makers[t]}),{FormCreate:A,install:function(t,e){!0!==t._installedFormCreate&&(t._installedFormCreate=!0,e&&_(e)&&m(c,e),t.use(A))}}}export{M as BaseForm,I as BaseParser,S as Creator,W as Handle,J as Render,E as VData,B as VNode,H as Vue,V as creatorFactory,L as creatorTypeFactory,N as makerFactory};
//# sourceMappingURL=form-create.core.min.js.map
